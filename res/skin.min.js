var VER="5.0.8",DEBUG=!1,UNDEF="undefined",NOLINK="javascript:void(0)",LOCAL=0===location.protocol.indexOf("file:"),TOUCH_START="touchstart",TOUCH_MOVE="touchmove",TOUCH_END="touchend",LOCALSTORAGE=function(){try{return localStorage.setItem("_t",VER),localStorage.removeItem("_t"),!0}catch(b){return!1}}(),VEND=function(b){return 0<b.indexOf("Trident")?"ms":0<b.indexOf("AppleWebKit")?"webkit":0<b.indexOf("Gecko")?"moz":0<b.indexOf("Presto")?"o":0<b.indexOf("Blink")?"webkit":""}(navigator.userAgent);
String.wsp=[];String.wsp[9]=!0;String.wsp[10]=!0;String.wsp[11]=!0;String.wsp[12]=!0;String.wsp[13]=!0;String.wsp[32]=!0;String.wsp[133]=!0;String.wsp[160]=!0;String.wsp[5760]=!0;String.wsp[6158]=!0;String.wsp[8192]=!0;String.wsp[8193]=!0;String.wsp[8194]=!0;String.wsp[8195]=!0;String.wsp[8196]=!0;String.wsp[8197]=!0;String.wsp[8198]=!0;String.wsp[8199]=!0;String.wsp[8200]=!0;String.wsp[8201]=!0;String.wsp[8202]=!0;String.wsp[8203]=!0;String.wsp[8232]=!0;String.wsp[8233]=!0;String.wsp[8239]=!0;
String.wsp[8287]=!0;String.wsp[12288]=!0;String.prototype.trim=function(){var b=this+"",a=b.length;if(a){var c=String.wsp,d=0;for(--a;0<=a&&c[b.charCodeAt(a)];)--a;for(++a;d<a&&c[b.charCodeAt(d)];)++d;b=b.substring(d,a)}return b};String.prototype.trunc=function(b){var a=this+"";if(a.length<=b)return a.toString();b=a.substring(0,b-1);a=b.lastIndexOf(" ");return(6<a&&20>b.length-a?b.substring(0,a):b)+"..."};String.prototype.startsWith=function(b){return 0===(this+"").indexOf(b)};
String.prototype.endsWith=function(b){return(this+"").substring(this.length-b.length)===b};String.prototype.getExt=function(){var b=this+"",a=b.lastIndexOf(".");return 0>=a||a>=b.length-1?"":b.substring(a+1).toLowerCase()};String.prototype.replaceExt=function(b){var a=this+"",c=a.lastIndexOf(".");return 0>=c?a:a.substring(0,c+1)+b};String.prototype.fixExtension=function(){return(this+"").replace(/.gif$/gi,".png").replace(/.tif+$/gi,".jpg")};
String.prototype.getDir=function(){var b=(this+"").split("#")[0];return b.substring(0,b.lastIndexOf("/")+1)};String.prototype.getFile=function(){var b=(this+"").split("#")[0];return b.substring(b.lastIndexOf("/")+1)};String.prototype.getRelpath=function(b){var a=this+"",c=a.lastIndexOf("#");for(-1===c?c=a.length-1:c--;0<=c&&!("/"===a[c]&&0===b--);c--);return a.substring(c+1)};
String.prototype.fixUrl=function(){for(var b,a,c=this+"";0<(b=c.indexOf("../"));){if(1===b||-1===(a=c.lastIndexOf("/",b-2)))return c.substring(b+3);c=c.substring(0,a)+c.substring(b+2)}return c};String.prototype.fullUrl=function(){var b=this+"";b.match(/^(http|ftp|file)/)||(b=window.location.href.getDir()+b);return b.fixUrl()};
String.prototype.cleanupHTML=function(){for(var b=[[/<br>/gi,"\n"],[/\&amp;/gi,"&"],[/\&lt;/gi,"<"],[/\&gt;/gi,">"],[/\&(m|n)dash;/gi,"-"],[/\&apos;/gi,"'"],[/\&quot;/gi,'"']],a=this+"",c=b.length-1;0<=c;c--)a=a.replace(b[c][0],b[c][1]);return a};String.prototype.stripHTML=function(){return(this+"").replace(/<\/?[^>]+>/gi,"")};String.prototype.stripQuote=function(){return(this+"").replace(/\"/gi,"&quot;")};String.prototype.appendSep=function(b,a){return(this.length?this+(a||" &middot; "):"")+b};
String.prototype.rgb2hex=function(){var b=this+"";if("#"===b.charAt(0)||"transparent"===b)return b;var a=b.match(/\d+/g),c="";if(a){for(var d=0;d<a.length&&3>d;d++)b=parseInt(a[d],10).toString(16),c+=(2>b.length?"0":"")+b;return"#"+c}return"transparent"};String.prototype.template=function(b){if(!b||!this)return this;for(var a=this+"",c=0;c<b.length;c++)a=a.replace(RegExp("\\{"+c+"\\}","gi"),b[c]);return a};Math.minMax=function(b,a,c){a=isNaN(a)?parseFloat(a):a;return a<b?b:a>c?c:a};
var getCoords=function(b){return b.touches&&0<b.touches.length?{x:Math.round(b.touches[0].clientX),y:Math.round(b.touches[0].clientY)}:null!==b.clientX?{x:Math.round(b.clientX),y:Math.round(b.clientY)}:null},noAction=function(b){b.preventDefault();return!1},fixFbComments=function(b){var a=window.location.href;-1===a.indexOf("?fb_comment_id=")?(a=a.split("#")[0],b&&"/"===a[a.length-1]&&(a+=b)):a=a.split("?")[0];document.getElementById("fb-comments").setAttribute("data-href",a)},initMobile=function(){if(/Mobile/.test(navigator.userAgent)&&
!(980<screen.width||980<screen.height||window.innerWidth!==document.documentElement.clientWidth&&window.innerWidth-1!==document.documentElement.clientWidth)){var b=function(){window.hasOwnProperty("pageYOffset")&&window.scrollTo(0,window.pageYOffset+1);return!0};setTimeout(function(){b()},1E3);$(window).on("orientationchange",b)}},log=function(){};
(function(b){var a,c=!1,d,e=1;log=function(f){DEBUG&&!c&&(a||(a=b('<div id="log" style="position:fixed;left:0;top:0;width:200px;bottom:0;overflow:auto;padding:10px;background-color:rgba(0,0,0,0.5);color:#fff;font-size:15px;z-index:99999"></div>').hover(function(){c=!0},function(){c=!1}).appendTo("body")),f===d?a.children(":first").empty().html(d+" ("+ ++e+")"):(b('<div style="height:2em;overflow:hidden;">'+f+"</div>").prependTo(a),d=f,e=1))};b.fn.logEvents=function(a){if(DEBUG){var c=a||"mousedown mouseup mouseover mouseout mousewheel dragstart click blur focus load unload reset submit change abort cut copy paste selection drag drop orientationchange touchstart touchmove touchend touchcancel MSPointerDown MSPointerMove MSPointerUp gesturestart gesturechange gestureend";
return this.each(function(){b(this).on(c,function(a){typeof a===UNDEF?log("Undefined event"):a.target?"log"!==a.target.id&&log(a.type+' <span style="padding:0 4px;font-size:0.8em;background-color:#000;border-radius:4px;"><b>'+(a.target.nodeName?a.target.nodeName.toLowerCase():"???")+"</b>"+(a.target.id?":"+a.target.id:"")+"</span>"+(a.relatedTarget?' <span style="padding:0 4px;font-size:0.8em;background-color:#800;border-radius:4px;"><b>'+a.relatedTarget.nodeName.toLowerCase()+"</b>"+(a.relatedTarget.id?
":"+a.relatedTarget.id:"")+"</span>":"")):log("No event target!");return!0})})}};b.fn.logCss=function(a,c,d){if(DEBUG){d=d||20;c=c||2E3;var e=new Date;return this.each(function(){var n=b(this),l=function(a){var b=new Date-e;log(b+"&nbsp;::&nbsp;"+a+" = "+n.css(a));b>c&&clearInterval(q)},q=setInterval(function(){if(b.isArray(a))for(var c=0;c<a.length;c++)l(a[c]);else l(a)},d)})}}})(jQuery);
var translate=function(b,a){b=b.trim();if(typeof Texts!==UNDEF&&Texts.hasOwnProperty(b))return Texts[b];if(typeof a!==UNDEF)return DEBUG&&console&&console.log("Using default translation: "+b+"="+a),a;DEBUG&&console&&console.log("Missing translation: "+b);var c=b.replace(/([A-Z])/g," $1").toLowerCase();c[0]=c.charAt(0).toUpperCase();return c},getKeys=function(b,a){var c={},d,e=b.split(","),f=e.length;for(d=0;d<f;d++)c[e[d]]=translate(e[d],a[e]);return c},getTranslations=function(b){var a={},c;for(c in b)a[c]=
"object"===typeof b[c]?getTranslations(b[c]):translate(c,b[c]);return a};
(function(b,a){/Trident/.test(navigator.userAgent)?/IEMobile/.test(navigator.userAgent)?(window.navigator.msPointerEnabled?(TOUCH_START="MSPointerDown",TOUCH_MOVE="MSPointerMove",TOUCH_END="MSPointerUp"):(TOUCH_START="pointerDown",TOUCH_MOVE="pointerMove",TOUCH_END="pointerUp"),a.touchMode=!0):a.touchMode=!1:(TOUCH_START="touchstart",TOUCH_MOVE="touchmove",TOUCH_END="touchend",a.touchMode=/(Chrome|CriOS)/.test(navigator.userAgent)?/Mobile/.test(navigator.userAgent):"ontouchstart"in window);var c=
"moz"===VEND?"transform":"-"+VEND+"-transform";b.fn.translate=function(a,e,f){return this.each(function(){f&&b(this).addClass(f).data("tr_cls",f);this.style[c]="translate("+(a||0)+"px,"+(e||0)+"px)";b(this).data({tr_x:a,tr_y:e})})};b.fn.translateToPos=function(){return this.each(function(){var a=b(this),e=a.data("tr_x")||0,f=a.data("tr_y")||0;if(e||f)e=a.position(),(f=a.data("tr_cls"))&&a.removeClass(f),this.style[c]="translate(0,0)",a.removeData("tr_x tr_y").css({left:e.left,top:e.top})})}})(jQuery,
document);
(function(){function b(){a&&(e(b),jQuery.fx.tick())}for(var a,c=0,d=["webkit","moz"],e=window.requestAnimationFrame,f=window.cancelAnimationFrame;c<d.length&&!e;c++)e=window[d[c]+"RequestAnimationFrame"],f=f||window[d[c]+"CancelAnimationFrame"]||window[d[c]+"CancelRequestAnimationFrame"];e?(window.requestAnimationFrame=e,window.cancelAnimationFrame=f,jQuery.fx.timer=function(c){c()&&(jQuery.timers.push(c)&&!a)&&(a=!0,b())},jQuery.fx.stop=function(){a=!1}):(window.requestAnimationFrame=function(a){var b=(new Date).getTime(),
d=Math.max(0,16-(b-c)),e=window.setTimeout(function(){a(b+d)},d);c=b+d;return e},window.cancelAnimationFrame=function(a){clearTimeout(a)})})(jQuery);
(function(b){var a=["DOMMouseScroll","mousewheel"];if(b.event.fixHooks)for(var c=a.length;c;)b.event.fixHooks[a[--c]]=b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=a.length;b;)this.addEventListener(a[--b],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var b=a.length;b;)this.removeEventListener(a[--b],d,!1);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},
unmousewheel:function(a){return this.unbind("mousewheel",a)}});var d=function(a){var c=a||window.event,d=[].slice.call(arguments,1),m=0,s=0,n=0;a=b.event.fix(c);a.type="mousewheel";c.wheelDelta?m=c.wheelDelta/120:c.detail&&(m=-c.detail/3);n=m;void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(n=0,s=-1*m);void 0!==c.wheelDeltaY&&(n=c.wheelDeltaY/120);void 0!==c.wheelDeltaX&&(s=-1*c.wheelDeltaX/120);d.unshift(a,m,s,n);return(b.event.dispatch||b.event.handle).apply(this,d)}})(jQuery);
(function(b){b.event.special.dbltap={setup:function(){b(this).on("touchend.dbltap",b.event.special.dbltap.handler)},teardown:function(){b(this).off("touchend.dbltap")},handler:function(a){var c=[].slice.call(arguments,1),d=b(a.target),e=(new Date).getTime(),f=e-(d.data("lastTouch")||0);if(5<f&&300>f)return a.preventDefault(),d.data("lastTouch",0),a=b.e.fix(a||window.event),a.type="dbltap",c.unshift(a),(b.e.dispatch||b.e.handle).apply(this,c);d.data("lastTouch",e);return!0}}})(jQuery);
(function(b){b.cookie=function(a,c,d){var e,f,h=function(a){return/^(true|yes)$/.test(a)?!0:/^(false|no)$/.test(a)?!1:/^([\d.]+)$/.test(a)?parseFloat(a):a};if(1<arguments.length)return f=new Date,null===c?LOCALSTORAGE?localStorage.removeItem(a):document.cookie=encodeURIComponent(a)+"=; expires="+f.toGMTString()+"; path=/":/^(string|number|boolean)$/.test(typeof c)&&(f.setTime(f.getTime()+1E3*("number"!==typeof d?3600:d)),LOCALSTORAGE?localStorage.setItem(a,String(c)+"; "+String(f.getTime())):document.cookie=
encodeURIComponent(a)+"="+String(c)+"; expires="+f.toGMTString()+"; path=/"),c;if(a)if(LOCALSTORAGE){if(e=localStorage.getItem(a))if(e=e.split("; "),b.isArray(e)&&1<e.length){f=new Date;if(f.getTime()<parseInt(e[1],10))return h(e[0]);localStorage.removeItem(a)}else return h(e)}else{e=document.cookie.split(";");a+="=";for(var m=0;m<e.length;m++)f=e[m].trim(),0===f.indexOf(a)&&(f=f.substring(a.length),h(f))}return null}})(jQuery);
(function(b){var a=-1===navigator.userAgent.indexOf("Firefox"),c={put:function(a,b){(b||window).location.hash=this.encoder(a)},get:function(b){b=(b||window).location.hash.replace(/^#/,"");try{return a?decodeURIComponent(b):b}catch(c){return b}},encoder:encodeURIComponent},d={base:{callback:void 0,type:void 0,check:function(){},load:function(){},init:function(a,d){var m;m=b.extend({unescape:!1},d||{});var s=m.unescape;if(!0===s)m=function(a){return a};else{if(m="string"===typeof s){m=s.split("");var n=
RegExp(b.map(m,encodeURIComponent).join("|"),"ig");m=s=function(a){return a.replace(n,decodeURIComponent)}}m=m||"function"===typeof s?function(a){return s(encodeURIComponent(a))}:encodeURIComponent}c.encoder=m;e.callback=a;e._options=d;e._init()},_init:function(){},_options:{}},timer:{_appState:void 0,_init:function(){var a=c.get();e._appState=a;e.callback(a);setInterval(e.check,100)},check:function(){var a=c.get();a!==e._appState&&(e._appState=a,e.callback(a))},load:function(a){a!==e._appState&&
(c.put(a),e._appState=a,e.callback(a))}},hashchangeEvent:{_init:function(){e.callback(c.get());b(window).on("hashchange",e.check)},check:function(){e.callback(c.get())},load:function(a){c.put(a)}}},e=b.extend({},d.base);e.type="onhashchange"in window?"hashchangeEvent":"timer";b.extend(e,d[e.type]);b.history=e})(jQuery);
(function(b){b.fn.addModal=function(a,c,d){"string"===typeof a&&(a=b(a));if(a instanceof b&&a.length){b.isArray(c)||(d=c,c=null);d=b.extend({},b.fn.addModal.defaults,d);d.savePosition=d.savePosition&&typeof d.uid!==UNDEF;var e=getTranslations(b.fn.addModal.text);d.defaultButton&&(d.defaultButton=translate(d.defaultButton,"OK"));var f,h,m,s,n,l,q=0,g;d.uid&&b("#"+d.uid).parents("._m_window").remove();f=b("<div>",{"class":"_m_window",role:"modal"}).css({opacity:0}).appendTo(b(this));b(this).css({position:"relative"});
d.darkenBackground||f.css({backgroundImage:"none",backgroundColor:"transparent"});h=b("<div>",{id:d.uid||"_mod_"+Math.floor(1E4*Math.random()),"class":"_m_panel "+d.type}).css({width:d.width}).appendTo(f);m=b("<header>",{"class":"_m_head"}).appendTo(h);m.append(b("<h5>",{text:d.title||("error"===d.type||"warning"===d.type?e[d.type]:"")}));("error"===d.type||"warning"===d.type)&&m.append(b("<span>",{"class":d.type,text:"!"}));var x=function(){s.trigger("removeTooltip");g=clearTimeout(g);f.animate({opacity:0},
d.speed,function(){f.remove()});return!1};f.on("destroy",x);if(d.closeOnClickOut&&d.darkenBackground)f.on("click",function(a){if(b(a.target).hasClass("_m_window"))return x(a)});s=b("<a>",{href:NOLINK,"class":"close",html:"&times;"}).appendTo(m);document.touchMode?s[0].addEventListener(TOUCH_END,x):(s.on("click",x),s.addTooltip(e.closeWindow));e=function(a){a.preventDefault();var c=h.position().left,e=h.position().top,g=getCoords(a),j=f.width()-h.width()-d.pad,k=f.height()-h.height()-d.pad,l=m.css("cursor");
m.css({cursor:"move"});var r=function(a){a.preventDefault();a=getCoords(a);h.css({left:Math.minMax(d.pad,c+a.x-g.x,j),top:Math.minMax(d.pad,e+a.y-g.y,k)});return!1},p=function(a){a.preventDefault();b(document).off({mousemove:r,mouseup:p});m.css("cursor",l);d.savePosition&&u();return!1};if(document.touchMode)this.addEventListener(TOUCH_END,p),this.addEventListener(TOUCH_MOVE,r);else b(document).on({mousemove:r,mouseup:p});return!1};if(document.touchMode)m[0].addEventListener(TOUCH_START,e);else m.on("mousedown",
e);n=b("<div>",{"class":"_m_cont"}).appendTo(h);l=b("<div>",{"class":"_m_cont_i"}).append(a).appendTo(n);!c&&d.defaultButton&&(c=[{t:d.defaultButton,h:x}]);if(c){var j,y=b("<div>",{"class":"buttons"}).appendTo(l),w=function(a){j.each(function(c){b(this).toggleClass("active",c===a)})},p=function(){b(document).off("keydown",r);x()},r=function(a){if(document.activeElement&&"input"===document.activeElement.nodeName||b.isFunction(d.enableKeyboard)&&!d.enableKeyboard())return!0;a=a?a.keyCode:window.event.keyCode;
if(27===a)return p(),!1;if(y){var c=y.find("a.active"),e=j.index(c);switch(a){case 13:case 10:b.isFunction(c[0].handler)&&!1!==c[0].handler.call(f)&&p();break;case 39:w((e+1)%j.length);break;case 37:w(e?e-1:j.length-1);break;default:return!0}return!1}return!0},k=function(a){a.preventDefault();a=a.target;b.isFunction(a.handler)&&!1!==a.handler.call(f,h)&&p();return!1};for(a=0;a<c.length;a++)a&&y.append(" "),e=b("<a>",{href:NOLINK,html:c[a].t}).on("click",k).appendTo(y),b.isFunction(c[a].h)&&(e[0].handler=
c[a].h);j=y.children("a");j.last().addClass("active");if(b.isFunction(d.enableKeyboard)||d.enableKeyboard)b(document).on("keydown",r)}if(d.resizable)if(m.on(document.touchMode?"dbltap":"dblclick",function(a){a.preventDefault();a=[h.position().left,h.position().top,h.width(),h.height()];var b=[d.pad,d.pad,f.width()-2*d.pad,f.height()-2*d.pad],c=function(a){h.css({left:Math.minMax(d.gap,a[0],f.width()-a[2]-d.gap),top:Math.minMax(d.gap,a[1],f.height()-a[3]-d.gap),width:a[2],height:a[3]});l.css({height:a[3]-
q})};a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]?c(h.data("wpos")):(c(b),h.data("wpos",a));d.savePosition&&u();return!1}),c=b("<a>",{"class":"resize"}).appendTo(h),a=function(a){a.preventDefault();var c=h.width(),e=h.height(),g=getCoords(a),j=f.width(),k=f.height()-d.pad-h.position().top-q,j=f.width()-d.pad-h.position().left,m=function(a){a.preventDefault();a=getCoords(a);var b=Math.min(Math.max(e+a.y-g.y-q,20),k);h.css({width:Math.min(Math.max(c+a.x-g.x,60),j),height:b+q});l.css({height:b});
return!1},r=function(a){a.preventDefault();b(document).off({mousemove:m,mouseup:r});d.savePosition&&u();return!1};if(document.touchMode)this.addEventListener(TOUCH_MOVE,m),this.addEventListener(TOUCH_END,r);else b(document).on({mousemove:m,mouseup:r});return!1},document.touchMode)c[0].addEventListener(TOUCH_START,a);else c.on("mousedown",a);var v=function(){var a=h.width(),b=h.height(),c=f.width(),e=f.height();q=b-l.height();a&&(b&&c&&e)&&(a+2*d.pad>c&&h.css({width:a=c-2*d.pad}),b+2*d.pad>e&&(h.css({height:b=
e-2*d.pad}),l.css({height:e-2*d.pad-q})),h.css({left:Math.max(Math.round((c-a)/2),d.pad),top:Math.max(Math.round((e-b)/2),d.pad)}))},u=function(){b.cookie("modalPosition"+d.uid,h.position().left+","+h.position().top+","+h.width()+","+h.height())},t=d.savePosition?b.cookie("modalPosition"+d.uid):null;f.css({opacity:0}).show();setTimeout(function(){if(t&&(t=t.split(","))&&b.isArray(t)&&3<t.length){var a=t,c=f.width(),e=f.height(),j=Math.minMax(d.pad,parseInt(a[0],10),c-d.pad-60),k=Math.minMax(d.pad,
parseInt(a[1],10),e-d.pad-60),a=Math.minMax(60,parseInt(a[2],10),c-j-d.pad),r;(isNaN(j)||isNaN(k)||isNaN(a)||isNaN(r))&&v();q=m.outerHeight()+parseInt(n.css("padding-top"),10)+parseInt(n.css("padding-bottom"),10)+parseInt(l.css("padding-top"),10)+parseInt(l.css("padding-bottom"),10)+parseInt(n.css("border-top-width"),10);h.css({position:"absolute",left:j,top:k,width:a});if(h.height()>(r=e-k-d.pad))h.css({height:r}),l.css({height:r-q})}else v();f.animate({opacity:1},d.speed);d.savePosition&&u();d.autoFade&&
(g=setTimeout(x,d.autoFade));d.scrollIntoView&&setTimeout(function(){var a=l.children(":not(.buttons)").find(".active:first");a&&a.length&&l.scrollTop(Math.max(Math.floor(a.position().top)-50,0))},200)},40);return this}};b.fn.addModal.defaults={speed:300,autoFade:0,width:400,resizable:!1,enableKeyboard:!0,closeOnClickOut:!0,darkenBackground:!0,savePosition:!1,scrollIntoView:!1,defaultButton:"okButton",pad:6,type:"normal"};b.fn.addModal.text={closeWindow:"Close window",error:"error",warning:"warning"}})(jQuery);
(function(b){b.fn.addTooltip=function(a,c){a&&("string"!==typeof a&&!a.jquery)&&(c=a,a=null);id={tooltip:"tooltip"};c=b.extend({},b.fn.addTooltip.defaults,c);b.fn.hideAllTooltips=function(){b("."+c.className).hide()};return this.each(function(){var d=b(this),e,f,h,m=!1,s=!1,n,l=function(){h=clearTimeout(h);m=!0;e.finish().show()},q=function(){s||(clearTimeout(h),m=!1,h=setTimeout(x,100))},g=function(){f=clearTimeout(f);clearTimeout(h);m=!1;h=setTimeout(x,100)},x=function(){!m&&e&&e.stop(!0,!1).fadeOut(200,
function(){e.hide()})},j=function(){var a=d.offset();a.top===n.top&&a.left===n.left&&e.fadeIn(300).alignTo(d,{pos:c.pos})},y=function(){if(e)e.stop(!0,!1),h=clearTimeout(h);else{var g;b:{if(g=a)if("string"===typeof g)g=b("<div>",{html:g}).appendTo("body");else if(g.jquery)g=b.contains(document.body,g[0])?g:g.appendTo("body");else{g=null;break b}else{(g=d.data(id.tooltip))?("."===g.charAt(0)?g=d.find(g):"#"===g.charAt(0)&&(g=b(g)),g.jquery&&g.removeClass("hidden")):(g=d.attr("title"),d.removeAttr("title"));
if(!g||!g.length){g=null;break b}g=b("<div>",{html:g}).appendTo("body")}g.addClass(c.className).hide()}(e=g)?(document.touchMode||(e.on("mouseover",l),e.on("mouseout",q)),e.find("input, textarea").on({focus:function(){s=!0;l()},blur:function(){s=!1}}),g=!0):g=!1;if(!g)return}n=d.offset();clearTimeout(f);f=setTimeout(j,c.delay);document.touchMode?(clearTimeout(h),h=setTimeout(x,c.stay)):m=!0},w=function(a){a.preventDefault();!e||e.is(":hidden")?y():(m=!1,g(),"A"===d[0].nodeName&&((a=d.attr("href"))&&
!a.startsWith("javascript:")?window.location.href=a:d.trigger("click")));return!1},p=function(a){a.preventDefault();a.stopPropagation()};d.on("removeTooltip",g);if(document.touchMode)this.addEventListener(TOUCH_START,w),this.addEventListener(TOUCH_END,p),this.addEventListener("click",p);else d.on({"focus mouseenter":y,"blur mouseleave":g})})};b.fn.addTooltip.defaults={delay:50,className:"hint",stay:2E3,pos:[1,2,1,0]}})(jQuery);
(function(b){b.fn.loadImages=function(a){a=b.extend({},b.fn.loadImages.defaults,a);return this.each(function(){var c=b(this),d=c.find(a.selector).eq(0)||c.children().eq(0);if(d.length&&c.is(":visible")&&d.is(":visible")){var e=d.find("img."+a.loadClass);if(e.length){var f="absolute"===d.css("position"),h=-(typeof a.left!==UNDEF?a.left:d.position().left-(f?0:c.scrollLeft()))-a.d,m=-(typeof a.top!==UNDEF?a.top:d.position().top-(f?0:c.scrollTop()))-a.d,s=d.offset().left,n=d.offset().top,l=(f?c.width():
b(window).width())+2*a.d,q=(f?c.height():b(window).height())+2*a.d,g,x,j,y,w,p=0;e.each(function(){x=b(this);g=x.parent();if(w=x.data("src"))y=g.offset().left-s,j=g.offset().top-n,j<m+q&&(y<h+l&&j+g.outerHeight()>m&&y+g.outerWidth()>h)&&(b("<span>",{"class":a.wait}).appendTo(g),x.hide().on("load",function(){b(this).fadeIn().siblings("."+a.wait).remove()}).attr({src:w}).removeClass(a.loadClass),p++)})}}})};b.fn.loadImages.defaults={selector:".load",loadClass:"toload",wait:"wait",d:80}})(jQuery);
(function(b){b.fn.addScroll=function(a){a=b.extend({},b.fn.addScroll.defaults,a);return this.each(function(){var c,d=b(this),e=d.parent(),f,h,m,s,n,l,q,g,x=0,j,y,w,p,r,k,v;d.css({position:"absolute",width:e.width-20});e.css({overflow:"hidden"});"absolute"!==e.css("position")&&e.css({position:"relative"});f=b("<div>",{"class":a.upbtn}).appendTo(e);h=b("<div>",{"class":a.dnbtn}).appendTo(e);m=b("<div>",{"class":a.scbar}).appendTo(e);s=b("<div>").appendTo(m);n=f.add(h).add(m);n.hide();var u=function(){return d.position().top},
t=function(a){return Math.round((m.height()-6)*-(null==a?u():a)/l)+3},D=function(){return Math.max(Math.round((m.height()-6)*q/l),a.dragMinSize)},z=function(b){null==b&&(b=u());f.css({opacity:b?1:a.disabledOpacity});h.css({opacity:b===q-l?a.disabledOpacity:1})},B=function(){return!1},E=function(){var a=l,b=q;l=d.height();q=e.height();e.scrollTop()&&(d.css({top:-e.scrollTop()}),e.scrollTop(0));if(a!==l||b!==q)l<=q?(d.css({top:0}).off("selectstart",B),n.hide()):(d.position().top<q-l&&d.css({top:q-l}),
s.css({top:t(),height:D()}),d.on("selectstart",B),n.show(),z()),e.loadImages()},C=function(b){clearInterval(g);q>=l||(b=Math.minMax(q-l,Math.round(b),0),s.stop(!0,!1).animate({top:t(b)},a.speed,a.effect),d.stop(!0,!1).animate({top:b},a.speed,a.effect,function(){z(b)}),e.loadImages({top:b}))};f.on("click",function(){C(u()+q);return!1});h.on("click",function(){C(u()-q);return!1});m.on("click",function(a){a.pageY<s.offset().top?C(u()+q):a.pageY>s.offset().top+s.height()&&C(u()-q);return!1});if(a.enableMouseWheel)d.on("mousewheel",
function(b,c){c&&(clearTimeout(g),s.stop(!0,!0),d.stop(!0,!0),C(u()+a.wheelIncr*(0>c?-1:1)));return!1});var G=function(a){a.preventDefault();s.css({top:Math.minMax(2,Math.round(a.pageY-s.data("my")),m.height()-s.height()-2)});d.css({top:Math.minMax(q-l,-Math.round((s.position().top-3)*l/(m.height()-6)),0)});z();e.loadImages();return!1},A=function(a){a.preventDefault();b(document).off("mousemove",G).off("mouseup",A);return!1};s.on("mousedown",function(a){a.preventDefault();b(this).data("my",Math.round(a.pageY)-
b(this).position().top);b(document).on({mousemove:G,mouseup:A});return!1});var F=function(a){return x=a.touches&&0<a.touches.length?a.touches[0].clientY:a.clientY?a.clientY:x},L=function(){k+=Math.round(r/20);var a=p+k;0<a||a<v?(clearInterval(g),e.loadImages()):(d.css({top:a}),s.css({top:t(),height:D()}),r*=0.8,10>Math.abs(r)&&(r=0,clearInterval(g),e.loadImages()))},I=function(a){a.preventDefault();if(y){if(a=F(a)-y)d.data("dragOn",!0),d.css({top:Math.minMax(v,j+a,0)}),s.css({top:t(),height:D()})}else y=
F(a);return!1},J=function(a){a.preventDefault();p=u();a=F(a)-y;var c=(new Date).getTime()-w;r=1E3*a/c;g=setInterval(L,50);document.touchMode?(this.removeEventListener(TOUCH_MOVE,I),this.removeEventListener(TOUCH_END,J)):b(document).off({mousemove:I,mouseup:J});setTimeout(function(){d.data("dragOn",!1)},20);e.loadImages();return 4>Math.abs(a)&&300>c},T=function(c){var e=c.target.nodeName;if("INPUT"===e||"TEXTAREA"===e||"BUTTON"===e)return!0;c.preventDefault();if(d.data("dragOn"))return J(c),!0;if(c.target.scrollHeight-
1>c.target.clientHeight||a.dontDrag&&(b(c.target).is(a.dontDrag).length||b(c.target).parents(a.dontDrag).length)||q>=l||("touchstart"===c.type||"touchmove"===c.type)&&(!c.touches||1<c.touches.length||d.is(":animated")))return!0;s.stop(!0,!0);d.stop(!0,!0);clearInterval(g);j=u();y=F(c);w=(new Date).getTime();k=0;v=q-l;if(document.touchMode)return b(c.target).closest("a").focus(),this.addEventListener(TOUCH_MOVE,I),this.addEventListener(TOUCH_END,J),!0;b(document).on({mousemove:I,mouseup:J});return!1};
if(document.touchMode)d[0].addEventListener(TOUCH_START,T);else d.on("mousedown",T);b(window).on("resize",function(){clearTimeout(c);c=setTimeout(E,50)});c=setTimeout(E,10);a.refresh&&setInterval(function(){b("[role=gallery]").is(":visible")||E()},a.refresh);d.attr("role","scroll").data("dragOn",!1).on("adjust",E);n.on("selectstart",B);T=function(){if(!d.data("dragOn")){var a=b(this).parent()===d?b(this):b(this).parent(),c=a.position().top,a=a.outerHeight(!0),g=d.position().top,j=e.height();if(!(j>
d.height())){if(c+a>j-g)g=Math.max(j-a-c,j-d.height());else if(c<-g)g=-c;else return;C(g)}}};if(a.focusActive)d.find("a").on("setactive",T);d.find("a").on("click",function(a){return d.data("dragOn")?(a.preventDefault(),!1):!0});if(b.isFunction(a.enableKeyboard)||a.enableKeyboard)b(document).on("keydown",function(c){if(document.activeElement&&"INPUT"===document.activeElement.nodeName||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return!0;switch(c?c.keyCode:window.event.keyCode){case 33:return c.preventDefault(),
C(u()+q),!1;case 34:return c.preventDefault(),C(u()-q),!1}return!0})})};b.fn.addScroll.defaults={upbtn:"scrup",dnbtn:"scrdn",scbar:"scrbar",dragMinSize:10,speed:300,effect:"swing",disabledOpacity:0.3,wheelIncr:50,enableKeyboard:!0,enableMouseWheel:!0,focusActive:!0,refresh:0}})(jQuery);
(function(b){b.extend(jQuery.easing,{easeOutBack:function(a,b,d,e,f,h){null==h&&(h=1.70158);return e*((b=b/f-1)*b*((h+1)*b+h)+1)+d}});b.fn.scrollThumbs=function(a){a=b.extend({},b.fn.scrollThumbs.defaults,a);return this.each(function(){var c=b(this),d=c.parent(),e=0,f,h,m,s,n,l,q,g,x,j=b("<div>",{"class":a.scleft}).insertAfter(d),y=b("<div>",{"class":a.scright}).insertAfter(d),w=function(b){b=null==b?c.position().left:b;j.css({opacity:0>b?1:a.disabledOpacity});y.css({opacity:d.width()<b+c.width()?
1:a.disabledOpacity})},p=function(e){var j=d.width(),h=c.width();j&&(h&&!(j>=h)&&b.isNumeric(e))&&(0<e?e=0:e<j-h&&(e=j-h),w(e),c.stop(!0,!1),clearInterval(g),c.animate({left:e},a.speed,a.effect),d.loadImages({left:e}))};j.on("click",function(a){a.preventDefault();r();p(c.position().left+d.width());return!1});y.on("click",function(a){a.preventDefault();r();p(c.position().left-d.width());return!1});var r=function(b){"number"===typeof x&&clearTimeout(x);x=typeof b!==UNDEF?b:setTimeout(function(){x=!1},
a.seekStay)};c.on("setactive",function(){if(!c.data("dragOn")&&!x){var b=c.find(a.active).closest("li");if(b.length){var e=b.position().left,b=b.outerWidth(!0),g=Math.round(b*a.headRoom),j=c.position().left,h=d.width();if(!(h>c.width())){if(e>h-b-g-j)j=Math.max(h-b-g-e,h-c.width());else if(e<-j+g)j=-e+g;else return;p(j)}}}});var k=function(a,b){a.preventDefault();b&&(c.stop(!0,!1),clearInterval(g),r(),p(c.position().left+d.width()*(0>b?-1:1)));return!1};if(a.enableMouseWheel)c.on("mousewheel",k);
w();var v=function(a){return e=a.touches&&0<a.touches.length?a.touches[0].clientX:a.clientX?a.clientX:e},u=function(){l+=Math.round(n/20);var a=s+l;0<a||a<q?clearInterval(g):(c.css({left:a}),n*=0.8,10>Math.abs(n)&&(n=0,clearInterval(g)))},t=function(a){a.preventDefault();if(h){if(a=v(a)-h)c.data("dragOn",!0),c.css({left:Math.minMax(q,f+a,0)})}else h=v(a);return!1},D=function(a){a.preventDefault();s=c.position().left;var e=v(a)-h,j=(new Date).getTime()-m;n=1E3*e/j;g=setInterval(u,50);r();document.touchMode?
(c[0].removeEventListener(TOUCH_MOVE,t),c[0].removeEventListener(TOUCH_END,D),10>Math.abs(e)&&b(a.target).parents("a").trigger("click")):b(document).off({mousemove:t,mouseup:D});setTimeout(function(){c.data("dragOn",!1)},20);d.loadImages();return 4>Math.abs(e)&&300>j},k=function(a){a.preventDefault();if(("touchstart"===a.type||"touchmove"===a.type)&&(!a.touches||1<a.touches.length||c.is(":animated")))return!0;c.stop(!0,!1);clearInterval(g);r(!0);f=c.position().left;h=v(a);m=(new Date).getTime();l=
0;q=d.width()-c.width();if(0<=q)return!0;if(document.touchMode)b(a.target).closest("a").focus(),c[0].addEventListener(TOUCH_MOVE,t),c[0].addEventListener(TOUCH_END,D);else b(document).on({mousemove:t,mouseup:D});return!1};if(document.touchMode)c[0].addEventListener(TOUCH_START,k);else c.on("mousedown",k);c.attr("role","scroll").data("dragOn",!1);c.add(j).add(y).on("selectstart",noAction);d.loadImages()})};b.fn.scrollThumbs.defaults={active:".active",scleft:"scleft",scright:"scright",seekStay:3E3,
speed:1500,incr:100,effect:"easeOutBack",headRoom:0.67,disabledOpacity:0.3,enableMouseWheel:!0}})(jQuery);
(function(b){b.extend(jQuery.easing,{easeOutCubic:function(a,b,d,e,f){return e*((b=b/f-1)*b*b+1)+d}});b.fn.addSwipe=function(a,c,d){d=b.extend({},b.fn.addSwipe.defaults,d);return this.each(function(){var e=b(this),f=e.parent(),h=this,m=0,s=0,n=f.outerWidth(),l=f.outerHeight(),q=e.outerWidth(),g=e.outerHeight(),x,j,y,w,p,r,k,v,u=function(){n=f.outerWidth();l=f.outerHeight()};b(window).on("resize.addswipe",function(){clearTimeout(j);j=setTimeout(u,50)});var t=function(a){v?(r=(a.touches&&0<a.touches.length?
a.touches[0].clientX:a.clientX)-w,e.translate(m+r,0)):(a.touches&&0<a.touches.length?(r=a.touches[0].clientX-w,k=a.touches[0].clientY-p):null!==a.clientX&&(r=a.clientX-w,k=a.clientY-p),e.translate(m+r,s+k))},D=function(){L();h.removeEventListener(TOUCH_MOVE,B);h.removeEventListener(TOUCH_END,D);return!1},z=function(a){a.preventDefault();L();b(document).off("mousemove.addswipe mouseup.addswipe click.addswipe");return!1},B=function(a){a.preventDefault();t(a);return!1},E=function(a){a.preventDefault();
t(a.originalEvent);return!1},C=function(a){if(a.touches){if(1<a.touches.length)return!0;w=a.touches[0].clientX;p=a.touches[0].clientY}else w=a.clientX,p=a.clientY;F();h.addEventListener(TOUCH_MOVE,B);h.addEventListener(TOUCH_END,D);return!0},G=function(a){w=a.originalEvent.clientX;p=a.originalEvent.clientY},A=function(a){a.preventDefault();G(a);F();e.on("click.addswipe",noAction);b(document).on({"mousemove.addswipe":E,"mouseup.addswipe":z});return!1},F=function(){e.removeClass("smooth");h.dragOn=
!0;y=(new Date).getTime();n=n||f.outerWidth();q=e.outerWidth();g=e.outerHeight();v=g<=l;m=e.data("tr_x")||0;s=v?0:e.data("tr_y")||0;r=k=0;x=q>n?Math.round((q-n*(1-d.oversizeTreshold))/2):0},L=function(){if(v&&!x&&Math.abs(r)<d.treshold)h.dragOn=null,e.translate(0,0),e.trigger("click");else{var g=(new Date).getTime()-y,j=m+r+300*r/g;e.translate(j,v?0:s+k+300*k/g,"smooth");j<-x?b.isFunction(a)&&a.call(h):j>x&&b.isFunction(c)&&c.call(h)}return!1};e.attr("draggable","true");if(document.touchMode)h.addEventListener(TOUCH_START,
C);else e.on({"dragstart.addswipe":A,"mousedown.addswipe":G});e.on("dragcancel.addswipe",function(){setTimeout(function(){h.dragOn=null},20);e.translate(0,0,"smooth");return!1});e.on("unswipe.addswipe",function(){h.dragOn=null;e.removeAttr("draggable");document.touchMode?(h.removeEventListener(TOUCH_MOVE,B),h.removeEventListener(TOUCH_END,D),h.removeEventListener(TOUCH_START,C)):(e.off(".addswipe"),b(document).off(".addswipe"))});e.on("selectstart.addswipe",noAction)})};b.fn.addSwipe.defaults={treshold:40,
oversizeTreshold:0.15,margin:15}})(jQuery);
(function(b){b.fn.alignTo=function(a,c){c=b.extend({},b.fn.alignTo.defaults,c);"string"===typeof a&&(a=b(a));if(a instanceof b&&a.length){var d=a.offset(),e=a.outerWidth(),f=a.outerHeight(),h=b(window).width(),m=b(window).height();return b(this).each(function(){var a=b(this);a.css("maxHeight","none");var n=a.outerWidth(),l=a.outerHeight(),q=Math.round(d.left+c.pos[2]*e/2+(c.pos[2]-1)*c.gap),g=Math.round(d.top+c.pos[3]*f/2+(c.pos[3]-1)*c.gap),q=Math.round(q-c.pos[0]*n/2),g=Math.round(g-c.pos[1]*l/
2);if(0>g||g+l>m)1!==c.pos[2]?g=2*g+l>m?m-l:0:0===c.pos[3]?m>2*d.top+f&&(g=d.top+f+c.gap):2===c.pos[3]&&m<2*d.top+f&&(g=Math.max(0,d.top-l-c.gap)),0>g&&(g=0),g+l>m&&a.css({overflow:"auto",maxHeight:m-g-(parseInt(a.css("paddingTop"),10)+parseInt(a.css("paddingBottom"),10))});if(0>q||q+n>h)1!==c.pos[3]?q=2*q+n>h?h-n:0:0===c.pos[2]?h>2*d.left+e&&(q=d.left+e+c.gap):2===c.pos[2]&&h<2*d.left+e&&(q=Math.max(0,d.left-n-c.gap)),0>q&&(q=0),q+n>h&&a.css({overflow:"auto",maxWidth:h-q-(parseInt(a.css("paddingLeft"),
10)+parseInt(a.css("paddingRight"),10))});a.css({position:"absolute",left:q,top:g})})}};b.fn.alignTo.defaults={gap:5,pos:[1,2,1,0]}})(jQuery);
(function(b){b.fn.addPlayer=function(a){if(typeof b.fn.jPlayer!==UNDEF){a=b.extend({},b.fn.addPlayer.defaults,a);var c=getTranslations(b.fn.addPlayer.text),d=0<=navigator.userAgent.indexOf("Firefox")&&0<=navigator.platform.indexOf("Mac"),e={cont:"jp-cont",mini:"jp-mini",audio:"jp-audio",video:"jp-video",playerType:"jp-type-single",player:"jp-jplayer",title:"jp-title",progress:"jp-progress",controls:"jp-controls-holder",startStop:"jp-startstop",volume:"jp-volume",times:"jp-times",toggles:"jp-toggles",
warning:"jp-warning",videoPlay:"jp-video-play",play:"jp-play",pause:"jp-pause",stop:"jp-stop",seekBar:"jp-seek-bar",playBar:"jp-play-bar",mute:"jp-mute",unmute:"jp-unmute",volumeBar:"jp-volume-bar",volumeBarValue:"jp-volume-bar-value",volumeMax:"jp-volume-max",currentTime:"jp-current-time",duration:"jp-duration",fullScreen:"jp-full-screen",restoreScreen:"jp-restore-screen",repeat:"jp-repeat",repeatOff:"jp-repeat-off",gui:"jp-gui",noSolution:"jp-no-solution",playing:"playing"},f=function(a){var b,
d=function(a){return'<a class="'+e[a]+'" title="'+c[a]+'">'+c[a]+"</a>"};b='<div class="'+e.progress+'"><div class="'+e.seekBar+'"><div class="'+e.playBar+'"></div></div></div>';b+='<div class="'+e.controls+'">';b+='<div class="'+e.startStop+'">'+d("play")+d("pause")+d("stop")+"</div>";b+='<div class="'+e.volume+'">'+d("mute")+d("unmute")+'<div class="'+e.volumeBar+'"><div class="'+e.volumeBarValue+'"></div></div></div>';b+='<div class="'+e.times+'"><div class="'+e.currentTime+'"></div><div class="'+
e.duration+'"></div></div>';b+='<div class="'+e.toggles+'">'+(a?"":d("fullScreen")+d("restoreScreen"))+d("repeat")+d("repeatOff")+"</div>";return b+"</div>"},h=function(){var a;(a=b(this).data("media"))&&a.jPlayer("pause");return!1},m=function(){var a;(a=b(this).data("media"))&&a.jPlayer("destroy");b(window).off("keydown",q);return!1},s=function(){var a;(a=b(this).data("media"))&&a.jPlayer("stop");return!1},n=function(){var a;(a=b(this).data("media"))&&a.jPlayer("play");return!1},l=b(this).eq(0),
q=function(a){return document.activeElement&&("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName)?!0:32===(a?a.keyCode:window.event.keyCode)?(l.find("."+e.player).jPlayer(l.data(e.playing)?"pause":"play"),!1):!0},g=function(b){return a.hasOwnProperty("audio")?a.audio:0<".mp3.m4a.f4a.rtmpa".indexOf(b.getExt())},x=function(a){var b=g(a)?"a":"v";switch(a.getExt()){case "mp3":a="mp3";break;case "mp4":a="m4"+b;break;case "ogg":a="og"+b;break;case "webm":a="webm"+b;
break;case "flv":case "f4a":case "f4v":a="fl"+b;break;case "rtmp":a="rtmp"+b;break;default:a=null}return a};return this.each(function(){var j=b(this),l,w,p,r=a.folder||"",k,v,u,t,D=0;a.elem?(t=b(this).find(a.elem),v=t.attr("href"),p=t.attr("title"),l=t.find("img:first"),l.length?(u=l.attr("src"),p||(p=l.attr("alt"))):u=p=""):(v=a.src,p=a.title||"",u=a.poster||"",t=b('<a href="'+v+'"'+(p?' title="'+p+'"':"")+">"+(u?'<img src="'+u+'">':"")+"</a>").appendTo(b(this)));if(LOCAL){var z=b('<div class="'+
e.warning+'">'+c.localFlashWarning+"</a></div>").appendTo(t);t.css("position","relative");z.hide();setTimeout(function(){z.fadeIn()},2E3)}if(v){a.auto&&(a.lowPriority||b("."+e.cont).each(function(){if(b(this).data(e.playing))return!0}));0<v.indexOf("::")?(v=v.split("::"),l=g(v[0]),w=x(v[0])):(l=g(v),w=x(v));this.id||(this.id=a.id+b.fn.addPlayer.id++);k="#"+this.id;b(j).addClass(e.cont);a.mini&&b(j).addClass(e.mini);p=a.showTitle?p:"";var B=l;"absolute"!==j.css("position")&&"fixed"!==j.css("position")&&
j.css({position:"relative"});j.css({overflow:"hidden"});var E,C=b('<div class="'+(B?e.audio:e.video)+'"></div>').appendTo(j),C=b('<div class="'+e.playerType+'"></div>').appendTo(C);E=b('<div class="'+e.player+'"></div>').appendTo(C);C.append('<div class="'+e.videoPlay+'"><a>'+c.play+"</a></div>");p&&C.append('<div class="'+e.title+'"><ul><li>'+p+"</li></ul></div>");C.append('<div class="'+e.gui+'">'+f(B)+"</div>");C.find("."+e.gui+" a").attr("href",NOLINK);!document.touchMode&&j.hasClass(e.fullScreen)&&
C.find("."+e.gui).hide();j.append('<div class="'+e.noSolution+'">'+c.unsupportedMediaFormat+"</div>");p=j.css("paddingTop");var B=j.css("paddingLeft"),C=j.css("paddingRight"),G=j.css("paddingBottom");j.find("."+e.gui).css({bottom:G,left:B,right:C});j.find("."+e.title).css({top:p,left:B,right:C});var A=function(){var c={},d,e,g=a.relativeUrl?"":location.href.substring(0,location.href.lastIndexOf("/")+1);b.isArray(v)?(D>=v.length&&(D=0),d=v[D]):(d=v,u&&(c.poster=(g+r+u).fixUrl()));e=x(d);c[e]=(g+r+
d).fixUrl();return c},F=function(){if(b.cookie){var a=j.find("."+e.currentTime).text().split(":"),a=2<a.length?60*(60*parseInt(a[0],10)+parseInt(a[1],10))+parseInt(a[2],10):60*parseInt(a[0],10)+parseInt(a[1],10);b.cookie("jp_"+j[0].id,(j.data(e.playing)?"1":"0")+"::"+a+"::"+E.jPlayer("option","volume").toString().substring(0,5)+(D!==UNDEF?"::"+D:""))}};p=!l&&!d;j.on("setEndedFn",function(c,d){a.ended=d&&b.isFunction(d)?d:null});E.jPlayer({cssSelectorAncestor:k,backgroundColor:a.backgroundColor,supplied:w,
swfPath:a.resPath+"/"+a.swf,solution:a.solution,size:{width:"100%",height:"100%"},fullWindow:!l&&a.fullScreen,preload:"auto",loop:a.loop,volume:a.volume,autohide:{restored:p,full:p},ready:function(){var c=b(this),d;if(a.saveStatus)a:{if(b.cookie&&(d=b.cookie("jp_"+j[0].id))){d=d.split("::");d={playing:"1"===d[0],time:parseInt(d[1]||0,10),volume:parseFloat(d[2]||0.8),curr:parseInt(d[4]||0,10)};break a}d=null}else d=null;j.data("media",c);a.saveStatus&&(b(window).on("unload",F),d&&(D=d.curr));var e=
A();t&&t.hide();c.jPlayer("setMedia",e);j.on({play:n,pause:h,stop:s,destroy:m});a.saveStatus&&d?(c.jPlayer("volume",d.volume),c.jPlayer(d.playing?"play":"pause",d.time)):a.auto&&!document.touchMode&&c.jPlayer("play");if(!a.lowPriority)b(window).on("keydown",q)},play:function(){b(this).jPlayer("pauseOthers");j.data(e.playing,!0);document.touchMode&&settimeout(function(){j.find("."+e.title).fadeOut(1E3)},600)},pause:function(){j.data(e.playing,!1)},stop:function(){j.data(e.playing,!1);document.touchMode&&
j.find("."+e.title).fadeIn(300)},ended:function(){b.isArray(v)&&(D+1<v.length||a.loop)?(D=(D+1)%v.length,b(this).jPlayer("setMedia",A()),a.auto&&b(this).jPlayer("play")):(j.data(e.playing,!1),b.isFunction(a.ended)&&a.ended.call())}})}})}};b.fn.addPlayer.id=0;b.fn.addPlayer.defaults={id:"jp_container_",backgroundColor:"#000000",resPath:"",swf:"Jplayer.swf",relativeUrl:!1,solution:"html,flash",volume:0.8,auto:!1,loop:!1,keyboard:!0,lowPriority:!1,saveStatus:!1,mini:!1,fullScreen:!1,showTitle:!1,size:{width:"100%",
height:"100%"}};b.fn.addPlayer.text={play:"play",pause:"pause",stop:"stop",mute:"mute",unmute:"unmute",fullScreen:"full screen",restoreScreen:"restore screen",repeat:"repeat",repeatOff:"repeat off",localFlashWarning:"Local Flash playback is possibly blocked by Flash security rules. Test videos in the uploaded album!",unsupportedMediaFormat:'<span>Unsupported media format</span>You might need to either update your browser or the <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a> or use another browser to play this media.'}})(jQuery);
(function(b){b.getLatLng=function(a){return typeof google===UNDEF||null==a?null:"string"===typeof a?(a=a.split(","),new google.maps.LatLng(parseFloat(a[0])||0,parseFloat(a[a.length-1])||0)):new google.maps.LatLng(a[0],a[1])};b.fn.addMap=function(a){if(typeof google===UNDEF||!google.maps)return this;a=b.extend({},b.fn.addMap.defaults,a);var c=a.resPath+"/marker-curr.png",d=a.resPath+"/marker.png",e=new google.maps.MarkerImage(c,new google.maps.Size(17,24),new google.maps.Point(0,0),new google.maps.Point(8,
24)),f=new google.maps.MarkerImage(d,new google.maps.Size(17,24),new google.maps.Point(0,0),new google.maps.Point(8,24)),h=new google.maps.MarkerImage(a.resPath+"/marker-shadow.png",new google.maps.Size(24,24),new google.maps.Point(0,0),new google.maps.Point(8,24));return this.each(function(){var m=b(this),s,n,l,q,g,x,j=[],y;m.readData(a,"type,zoom,map,label,resPath,markers");var w=function(){m&&m.data("fresh")&&(l&&m.is(":visible")&&!m.parents(":hidden").length&&m.width()&&m.height()?(clearTimeout(g),
m.width(m.parent().width()),google.maps.event.trigger(l,"resize"),l.setCenter(s),m.data("fresh",!1)):g=setTimeout(w,200))};q&&q.length&&q.remove();q=b("<div>").css({position:"absolute",top:"-9000px",width:m.width(),height:m.height()}).appendTo("body");m.data("fresh",!0).on({adjust:w,destroy:function(){l.getParentNode().removeChild(l);b(window).off("resize",w)}});if(a.markers&&a.markers.length&&null!=a.curr)s=a.markers[a.curr].map;else if(a.map)s=b.getLatLng(a.map),n=a.label;else return;if(null!==
(x=b.cookie("mapType")))a.type=x;if(null!==(x=b.cookie("mapZoom")))a.zoom=parseInt(x,10)||a.zoom;setTimeout(function(){var g,r=new google.maps.Map(q[0],{zoom:a.zoom,center:s,scrollwheel:!1,mapTypeId:a.type.toLowerCase()});google.maps.event.addListener(r,"maptypeid_changed",function(){b.cookie("mapType",b.fn.addMap.defaults.type=r.getMapTypeId(),3600)});google.maps.event.addListener(r,"zoom_changed",function(){b.cookie("mapZoom",b.fn.addMap.defaults.zoom=r.getZoom(),3600)});if(a.markers&&1<a.markers.length){var k,
v,u=Math.max(a.curr-a.range,0),t=Math.min(a.curr+a.range,a.markers.length),w=function(){a.click.call(this)};for(k=u;k<t;k++)v=a.markers[k],g={position:v.map,map:r,title:v.label,icon:k===a.curr?e:f,shadow:h,zIndex:k===a.curr?999:k},g=new google.maps.Marker(g),b.isFunction(a.click)&&v.link&&(g.link=v.link,google.maps.event.addListener(g,"click",w)),j.push(g)}else g=new google.maps.Marker(b.extend({position:s,map:r,title:n},c));q.css({top:0}).appendTo(m);l=r;y=a.curr;m.on("setactive",function(a,e){b.isArray(j)&&
j.length&&(y>=u&&(j[y].setIcon(d),j[y].setZIndex(y)),typeof e!==UNDEF&&e>=u&&e<u+j.length?(j[e-u].setIcon(c),j[e-u].setZIndex(9999),l.setCenter(j[e-u].position),y=e):y=-1)})},20);b(window).on("resize",function(){clearTimeout(g);m.data("fresh",!0);g=setTimeout(w,100)})})};b.fn.addMap.defaults={type:"roadmap",zoom:16,range:30,resPath:""}})(jQuery);
(function(b){b.fn.fullScreen=function(a){var b=function(a,b){b="FullScreen"===b&&"webkit"===VEND?VEND+"Is"+b:VEND&&VEND+b||b.substr(0,1).toLowerCase()+b.substr(1);return"function"===typeof a[b]?a[b]():a[b]};return typeof a===UNDEF?b(this[0],"FullScreen"):this.each(function(){var d=b(this,"FullScreen");a?d||b(this,"RequestFullScreen"):d&&b(this,"CancelFullScreen")})}})(jQuery);
var xDecrypt=function(b){if("String"===!typeof this)return"";var a=[147,163,87,254,153,4,198,23],c=b.length,d=5*Math.ceil(c/8),e=Array(d),f="",h,m=0,s,n;for(h=0;h<d;h++)e[h]=0;for(h=0;h<c;h++){if(9<(n=b.charCodeAt(h)-48))n-=7;n<<=11-m%8;s=Math.floor(m/8);s<d&&(e[s]|=n>>8,++s<d&&(e[s]|=n&255));m+=5}for(h=0;h<d;h++)e[h]^=a[h%8];d=e[0]|e[1]<<8;n=0;for(h=4;h<d;h++)f+=String.fromCharCode(e[h]),n+=e[h];n!=(e[2]&255|e[3]<<8)&&(f="");return f};
(function(b){b.fn.addShop=function(a,c){c=b.extend({},b.fn.addShop.defaults,c);if(!a||!a.length||!c.id)return this;var d=b.fn.addShop.id,e=b.fn.addShop.text,f=c.id.replace("|","@"),h=DEBUG?b.fn.addShop.st.sandboxurl:b.fn.addShop.st.url,m=b.fn.addShop.st.curr_symbol[c.currency]||c.currency,s=b.fn.addShop.st.btn_lng[c.locale]||"en_US",n=b(this).eq(0),l,q,g=a.length,x,j,y=1<g?b.fn.addShop.st.targetCart:b.fn.addShop.st.target,w,p=function(a,c,d,e,g){if(!a||!c)return{};a=b("<input>",{type:e||"text"}).appendTo(a);
a.prop("name",c);d&&a.val("string"===typeof d?d.stripQuote():d);g&&a.prop(g,!0);return a},r=function(a){if(typeof a===UNDEF)return u(1<g?d.discountRateCart:d.discountRate);1<g?u(d.discountRateCart,a):(u(d.discountRate,a),u(d.discountRate+"2",a))},k=function(a){if(typeof a===UNDEF)return u(1<g?d.discountAmountCart:d.discountAmount);u(1<g?d.discountAmountCart:d.discountAmount,a)},v=function(a,b){var c=q.children("[name="+d.option+"]");if(c&&c.length){var e=c.val().replace(/(\s\(CC\:.+\))$/,"");c.val(e+
" (CC:"+a+(typeof b!==UNDEF?"="+b:"")+")")}},u=function(a,b){var c=q.children("[name="+a+"]");if(typeof b===UNDEF)return c&&c.length?parseFloat(c.val()):null;null==b?c.remove():c&&c.length?c.val(b):p(q,a,b,"hidden")},t=function(){var a=l.children("select").eq(0);return a&&a.length?a.prop("selectedIndex"):0},D=function(){var a=t(),c=l.children(".discount").eq(0),d=l.children(".total").eq(0),e=l.children("[name=copies]").val()||1,h=w[a].price,a=w[a].shipping+(e-1)*w[a].shipping2,j=k(),f=r();c.length||
(c=b("<span>",{"class":"discount"}).insertAfter(l.children("select")));j&&0<j?(c.show().html("- "+m+" "+j.toFixed(2)),d.html(m+" <b>"+(g*(e*h+a)-j).toFixed(2)+"</b>")):f&&0<f?(c.show().text("-"+f+"%"),d.html(m+" <b>"+(g*(e*h*(100-f)/100+a)).toFixed(2)+"</b>")):(c.hide(),d.html(m+" <b>"+(g*(e*h+a)).toFixed(2)+"</b>"))},z=function(){var a=t(),b=l.children("[name=copies]").val()||1,e=w[a].price,h=w[a].shipping,j=w[a].shipping2;c.quantityCap&&b>c.quantityCap&&l.children("[name=copies]").val(b=c.quantityCap);
if(1<g)for(var f=1;f<=g;f++)u(d.price+"_"+f,e),u(d.copies+"_"+f,b),u(d.shipping+"_"+f,h),u(d.shipping2+"_"+f,j);else u(d.price,e),u(d.copies,b),u(d.shipping,h),u(d.shipping2,j);u(d.option,w[a].text);D()},B=function(a){var d,h=new Date,j;a=!0===a;if(c.coupons&&(d=l.children("[name=coupon]"))&&(j=d.val().trim()).length){var f,n,p=xDecrypt(c.coupons).split("::");for(f=0;f<p.length;f++)if(n=p[f].split(/=|\s*<\s*/),n[0]===j&&1<n.length&&(d=parseFloat(n[1]),!(0.01>d))){if(2<n.length){var q=n[2].split(/-|:|\//);
2>q.length&&(q[1]=1);3>q.length&&(q[2]=1);if(new Date(parseInt(q[0]),parseInt(q[1]),parseInt(q[2]))<h)return b("body").addModal(b("<div>",{html:e.expired.replace("{0}",j)}),{type:"error"}),!1}if("%"===n[1].charAt(n[1].length-1)){if(99<d||1>d)continue;f=r();f>d?a&&b("body").addModal(b("<div>",{html:e.lowerThanCurrent.replace("{0}",f+"%")}),{type:"warning"}):(a&&b("body").addModal(b("<div>",{html:e.accepted.replace("{0}",d+"%")}),{title:e.success}),r(d),v(j,d+"%"),b.cookie("discountRate",j,86400))}else b.cookie("discount_"+
j)?(a&&b("body").addModal(b("<div>",{html:e.reclaimed}),{type:"warning"}),k(null),x&&(r(x),v(j,x+"%"))):(f=r(),h=w[t()].price,f=k()||(0<f?g*h*f/100:0),h*g<d?a&&b("body").addModal(b("<div>",{html:e.higherThanPrice.replace("{0}",m+"&nbsp;"+d)}),{type:"warning"}):f>d?a&&b("body").addModal(b("<div>",{html:e.lowerThanCurrent.replace("{0}",m+"&nbsp;"+f.toFixed(2))}),{type:"warning"}):(a?b("body").addModal(b("<div>",{html:e.accepted.replace("{0}",m+"&nbsp;"+d)}),{title:e.success}):(b.cookie("discount_"+
j,d,86400),x=r(),r(null)),k(d),v(j,c.currency+" "+d)));D();return!0}b("body").addModal(b("<div>",{html:e.noSuch}),{type:"error"});return!1}return!0},E=c.options.split("::"),C,G,A,F,L=[];for(C=0;C<E.length;C++)if(G=E[C].split("="),1<G.length&&(F={},F.label=G[0],A=G[1].split("+"),null!=(F.price=parseFloat(A[0]))))F.shipping=1<A.length?parseFloat(A[1]):0,F.shipping2=2<A.length?parseFloat(A[2]):F.shipping,F.text=G[0]+" = "+m+" "+F.price.toFixed(2)+(1<A.length?"+"+F.shipping.toFixed(2):""),L.push(F);w=
L;if(w.length){l=b("<form>",{name:"shopping",method:"post"}).appendTo(n);1<g&&l.append(b("<span>",{"class":"count",html:"<b>"+g+"</b> &times;"}));E=w;G=b("<select>").appendTo(l);for(C=0;C<E.length;C++)G.append(b("<option>",{val:E[C].price,html:E[C].text}));j=G;j.on("change",z);c.hasOwnProperty("discount")||(c.discount=b.fn.addShop.defaults.discount||0);"-"===c.discount&&(c.discount=0);1!==c.quantityCap&&(l.append("&times;"),j=p(l,"copies",1),j.addClass("copies").on("change",z));l.append("=");l.append(b("<span>",
{"class":"total"}));c.coupons&&(l.append(b("<input>",{type:"text",name:"coupon","class":"coupon",placeholder:e.couponCode})),E=b("<a>",{href:NOLINK,html:"&nbsp;","class":"redeem"}).on("click",function(a){a.preventDefault();B(!0);return!1}),document.touchMode||E.addTooltip(e.redeem),l.append(E));q=b("<form>",{name:d.form,target:c.continueUrl?"_blank":y,action:h+"cgi-bin/webscr/",method:"post"}).appendTo(n);u("cmd","_cart");u("charset","utf-8");u("lc",c.locale);u(d.seller,f);u(d.currency,c.currency);
u(d.shopUrl,c.continueUrl||decodeURIComponent(window.location.href));null!=c.handling&&b.isNumeric(c.handling)&&u(d.handlingCart,c.handling);u(d.option,w[0].label);c.discount&&100>c.discount&&r(c.discount);if(1<g){u("upload",1);u(d.name,g+" "+e.items);var I;a.each(function(a){j=b(this).find("img:first");I=j.data("src")||j.attr("src")||"";u(d.name+"_"+(a+1),decodeURIComponent(I.getFile()+" ["+c.path+I.getDir().replace("thumbs/","")+"]"))})}else u("add",1),j=a.eq(0).find("img:first"),u(d.name,decodeURIComponent((j.data("src")||
j.attr("src")||"").getFile()+" ["+c.path+"]"));z();q.append(b("<input>",{id:"shopAdd",type:"image",name:"submit",src:h+s+"/i/btn/btn_"+(1<g?"buynow":"cart")+"_SM.gif",alt:1<g?"Buy now":"Add to Cart"}));q.on("submit",function(a){var d=!0;a=b(a.target);c.coupons&&(d=B());d&&(a.parents("[role=modal]").trigger("destroy"),window.open("",y,"width=1024,height=600,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no"));return d});if(c.coupons&&(z=b.cookie("discountRate")))b("input[name=coupon]").val(z),
B(!1);1===g&&(n=b("<form>",{"class":"view",name:"paypalview",target:y,action:h+"cgi-bin/webscr/",method:"post"}).appendTo(n),p(n,"cmd","_cart","hidden"),p(n,"lc",c.locale,"hidden"),p(n,d.seller,f,"hidden"),p(n,"display",1,"hidden"),n.append(b("<input>",{id:"shopView",type:"image",name:"submit",src:h+s+"/i/btn/btn_viewcart_SM.gif",alt:"View Cart"})),n.on("submit",function(){window.open("",y,"width=1024,height=600,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no");
return!0}));D();return this}};b.fn.addShop.defaults={currency:"EUR",locale:"US",quantityCap:0,shippingFlat:!1};b.fn.addShop.text=getTranslations({items:"items",success:"Success",couponCode:"Coupon code",redeem:"Redeem",noSuch:"No such coupon exists!",expired:"The coupon code <b>{0}</b> has expired!",accepted:"The coupon code is accepted. You will get <b>{0}</b> discount the next time you add this item to the cart.",lowerThanCurrent:"This coupon offers lower discount than the current <b>{0}</b>.",
higherThanPrice:"You can use this coupon only for items priced higher than <b>{0}</b>.",reclaimed:"This coupon has already been used!"});b.fn.addShop.st={target:"ShoppingCart",targetCart:"BuyNow",url:"https://www.paypal.com/",sandboxurl:"https://www.sandbox.paypal.com/",btn_lng:{DE:"de_DE",FR:"fr_FR",IT:"it_IT",ES:"es_ES",PT:"pt_PT",PT:"pt_BR",DA:"da_DK",NL:"nl_NL",NO:"no_NO",SV:"sv_SE",TR:"tr_TR",RU:"ru_RU",PL:"pl_PL",IL:"he_IL",TH:"th_TH"},curr_symbol:{USD:"US$",EUR:"&euro;",GBP:"GB&pound;",JPY:"&yen;",
HUF:"Ft"}};b.fn.addShop.id={form:"paypal",seller:"business",currency:"currency_code",name:"item_name",option:"item_number",custom:"custom",price:"amount",priceCart:"amount_1",copies:"quantity",discountRate:"discount_rate",discountRateCart:"discount_rate_cart",discountAmount:"discount_amount",discountAmountCart:"discount_amount_cart",shipping:"shipping",shipping2:"shipping2",handlingCart:"handling_cart",shopUrl:"shopping_url"}})(jQuery);
(function(b){b.fn.addSocial=function(a){a=b.extend({},b.fn.addSocial.defaults,a);var c=getTranslations(b.fn.addSocial.text),d=window.location.href.split("#")[0]+(a.useHash?"#"+encodeURIComponent(a.hash||""):""),e=encodeURIComponent(window.location.href.split("#")[0]+(a.useHash?"#"+encodeURIComponent(a.hash||""):"")),f=encodeURIComponent(a.title||b("meta[name=title]").attr("content")||b("title").text()),h=encodeURIComponent(c.checkOutThis),m=a.inline?90:a.width,s=a.image?window.location.href.getDir()+
a.image:b("link[rel=image_src]").attr("href");return this.each(function(){var n=b(this);"a"===this.nodeName&&n.attr("href",NOLINK);var l=b("<div>",{"class":a.className});if(LOCAL&&!DEBUG)l.html(c.localWarning);else{if(!LOCAL){if(!a.useHash){a.facebookLike&&l.append('<div class="likebtn"><iframe src="//www.facebook.com/plugins/like.php?href='+d+"&amp;layout=button_count&amp;show_faces=false&amp;width="+m+"&amp;action=like&amp;font=arial&amp;colorscheme="+a.likeBtnTheme+'&amp;height=22" scrolling="no" frameborder="0" style="border:none;overflow:hidden;width:'+
m+'px;height:22px;" allowTransparency="true"></iframe></div>');a.twitterTweet&&l.append('<div class="likebtn"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="//platform.twitter.com/widgets/tweet_button.html?url='+d+"&text="+f+'" style="width:'+m+'px; height:22px;"></iframe></div>');if(a.googlePlus){var q=a.inline?90:120,g=b('<div class="likebtn" style="max-width:'+q+"px;min-width:"+q+'px;"><div class="g-plusone" data-href="'+d+'"></div></div>').appendTo(l),x=20,j=function(){typeof gapi===
UNDEF?x--?setTimeout(j,200):typeof console!==UNDEF&&console.log("Google Plus API failed to load!"):setTimeout(function(){gapi.plusone.render(g[0],{size:"medium",annotation:"bubble"})},200)};j()}a.pinItBtn&&l.append('<div class="likebtn" style="height:22px;"><a data-pin-config="beside" href="//pinterest.com/pin/create/button/?url='+e+"&media="+encodeURIComponent(s)+"&description="+f+'" data-pin-do="buttonPin" ><img src="http://assets.pinterest.com/images/pidgets/pin_it_button.png" /></a></div>')}a.tumblrBtn&&
l.append('<div class="likebtn" id="tumblr"><a href="//www.tumblr.com/share/'+(a.image?"photo?source=":"link?url=")+encodeURIComponent(d)+"&name="+f+'" title="Share on Tumblr" style="display:inline-block;text-indent:-9999px;overflow:hidden;width:'+m+'px;height:22px;background:url(http://platform.tumblr.com/v1/share_1.png) top left no-repeat transparent;">Tumblr</a></div>')}if(a.facebook||a.twitter||a.gplus||a.pinterest||a.digg||a.delicious||a.myspace||a.stumbleupon||a.reddit||a.email)a.buttonLabels||
l.append("<span>"+c.shareOn+"</span>"),a.facebook&&l.append('<a href="http://www.facebook.com/sharer.php?s=100&p%5Burl%5D='+e+"&p%5Bimages%5D%5B0%5D="+encodeURIComponent(s)+"&p%5Btitle%5D="+f+'" class="facebook"'+(a.buttonLabels?">Facebook":' title="Facebook">')+"</a>"),a.twitter&&l.append('<a href="http://twitter.com/home?status='+h+": "+e+'" class="twitter"'+(a.buttonLabels?">Twitter":' title="Twitter">')+"</a>"),a.gplus&&l.append(b("<a>",{"class":"gplus",href:"https://plus.google.com/share?url="+
e,title:"Google+",text:a.buttonLabels?"Google+":""}).on("click",function(){window.open(this.href,this.title,"menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=760,width=980");return!1})),a.pinterest&&l.append('<a href="http://pinterest.com/pin/create/button/?url='+e+"&media="+encodeURIComponent(s)+"&description="+f+'" class="pinterest"'+(a.buttonLabels?">Pinterest":' title="Pinterest">')+"</a>"),a.digg&&l.append('<a href="http://digg.com/submit?url='+d+'" class="digg"'+(a.buttonLabels?">Digg":
' title="Digg">')+"</a>"),a.delicious&&l.append('<a href="http://delicious.com/save?url='+d+"&title="+f+'&v=5" class="delicious"'+(a.buttonLabels?">Delicious":' title="Delicious"')+"</a>"),a.myspace&&l.append('<a href="http://www.myspace.com/index.cfm?fuseaction=postto&t='+f+"&u="+d+'&l=3" class="myspace"'+(a.buttonLabels?">MySpace":' title="MySpace"')+"</a>"),a.stumbleupon&&l.append('<a href="http://www.stumbleupon.com/submit?url='+d+"&title="+f+'" class="stumbleupon"'+(a.buttonLabels?">StumbleUpon":
' title="StumbleUpon">')+"</a>"),a.reddit&&l.append('<a href="http://www.reddit.com/submit?url='+d+'" class="reddit"'+(a.buttonLabels?">Reddit":' title="Reddit"')+"</a>"),l.children("a").attr("target","_blank"),a.email&&l.append('<a href="mailto:?subject='+h+"&body="+f+"%0D%0A"+d.replace(/%/g,"%25")+'" class="email"'+(a.buttonLabels?">Email":' title="Email">')+"</a>"),!a.buttonLabels&&!document.touchMode&&l.children("a").addTooltip()}n.on("destroy",function(){l.remove()});a.inline?l.appendTo(n):n.addTooltip(l,
{width:a.width,stay:5E3,pos:a.pos})})};b.fn.addSocial.defaults={className:"shares",width:120,useHash:!0,likeBtnTheme:"light",inline:!1,buttonLabels:!0,pos:[1,2,1,0]};b.fn.addSocial.text={shareOn:"Share on",checkOutThis:"Found this page",localWarning:"Can't share local albums. Please upload your album first!"}})(jQuery);
(function(b){b.fn.readData=function(a,c){if(null==a||null==c)return this;c=c.split(",");var d,e=c.length,f;return this.each(function(){for(d=0;d<e;d++)if(null!=(f=b(this).data(c[d])))a[c[d]]=f})};b.fn.showin=function(){return this.each(function(){b(this).css("display","inline-block")})};b.fn.togglein=function(a){if(typeof a===UNDEF)return this.each(function(){b(this).css("display","none"===b(this).css("display")?"inline-block":"none")});b(this).css("display",a?"inline-block":"none");return this};
b.fn.getDim=function(){var a=b(this).eq(0),c={width:a.width(),height:a.height()};if((0===c.width||0===c.height)&&"none"===a.css("display")){var d=a.css("position"),e=a.css("left");a.css({position:"absolute",left:"-10000px",display:"block"});c.width=a.width();c.height=a.height();a.css({display:"none",position:d,left:e})}return c};typeof Search!==UNDEF&&(Search.text=getTranslations({searchBoxTip:"Search...",searchResultsFor:"Search results for",newImages:"New images",notFound:"Not found",close:"Close"}),
Search.start=function(a){if(null!=a){var c="string"===typeof a||b.isNumeric(a)?String(a):"FORM"===a.nodeName?b(a).find("input[type=search]").val().trim():b(a).text().trim(),d,e=0,f,h,m,s=!1,n,l,q,g,x,j,y,w,p,r,k,v;if(Search.data&&b.isArray(Search.data)&&Search.data.length&&c&&!(2>c.length)){d=b("<div>",{"class":"searchresults"});n=function(a){a.preventDefault();a=b(this).closest("form").children("input:first").val().trim();2<=a.length&&Search.start(a);return!1};c.startsWith("@new")?(s=!0,m=Search.created||
Math.round((new Date).getTime()/864E5),h=parseInt(c.split(":")[1],10)||30):(v=RegExp("("+c.replace(/\s/g,"|")+")","i"),d.append('<form><input type="text" value="'+c+'"><a class="button">&nbsp;</a></form>'),d.find("a.button").on("click",n),d.find("form").on("submit",n));w=Search.rootPath&&"."!==Search.rootPath?Search.rootPath+"/":"";n=window.location.href.getRelpath(Math.floor(w.length/3));var u=function(a){var d=b(a.target).closest("a");if(!d.length||!d.hasClass("active")||!window.location.href.endsWith(d.attr("href")))return Search.makeSlides||
(d.addClass("active"),d.siblings(".active").removeClass("active")),b.cookie("lastSearch",c,8),!0;a.cancelBubble=!0;return!1};for(l=0;l<Search.data.length;l++){y=w;Search.data[l][0].length&&(y+=(Search.urlEncode?Search.data[l][0]:encodeURIComponent(Search.data[l][0]).replace(/%2F/g,"/"))+"/");x=Search.data[l][1].length;for(q=0;q<x;q++)if(p=Search.data[l][1][q].split(Search.sep),s&&5<p.length&&m-parseInt(p[5],10)<h||!s&&v.test(Search.data[l][1][q])){j=p[0].split(":");k=j[0].getExt();r=1<j.length?j[1]:
j[0].substring(j[0].lastIndexOf(".")+1);g=encodeURIComponent(j[0]);switch(k.toLowerCase()){case Search.ext:j=y+Search.folderThumb;break;case "tif":case "bmp":Search.makeSlides||(g=g.replaceExt(r));case "jpg":case "jpeg":case "png":case "mp4":j=y+Search.thumbs+"/"+g.replaceExt(r);break;case "mp3":j="png"===r?w+"res/audio.png":y+Search.thumbs+"/"+g.replaceExt(r);break;case "gif":g=g.replaceExt(r);j=y+Search.thumbs+"/"+g;break;case "pdf":case "zip":case "txt":case "doc":case "xls":j=w+"res/"+k+".png";
break;default:j=w+"res/unknown.png"}k===Search.ext?(g=y+g,j=y+Search.folderThumb):g=y+(Search.makeSlides?Search.slides+"/"+g.replaceExt(Search.ext):Search.indexName+"#"+(Search.urlEncode?g.replace(/\'/g,"%27").replace(/%/g,"%25").replace(/\(/g,"%2528").replace(/\)/g,"%2529"):g));j=b("<a>",{href:g.fixUrl()}).append(b("<aside>").append(b("<img>",{src:j}))).on("click",u).appendTo(d);g.endsWith(n)&&j.addClass("active");p[1]&&j.append(b("<h5>").append(p[1]));p[2]&&p[2]!==p[1]&&j.append(b("<p>").append(p[2].trunc(192)));
for(g=3;g<p.length-1;g++)p[g]&&p[g].trim().length&&j.append(b("<p>").append(p[g].trunc(192)));window.location.hash===p[0]&&(f=e);e++}}a.jquery&&b(a).parents(".hint:first").fadeOut(100,function(){b(this).remove()});e?setTimeout(function(){b(".searchresults > a").eq(f||0).focus()},250):d.append(b("<p>",{text:Search.text.notFound}));b("body").addModal(d,{uid:"searchres",title:c.startsWith("@new")?Search.text.newImages:Search.text.searchBoxTip,darkenBackground:!1,defaultButton:"close",resizable:!0,scrollIntoView:!0,
savePosition:!0});return!1}}},Search.rootPath="",Search.init=function(a){Search.rootPath=a;if((a=b.cookie("lastSearch"))&&a.length&&"null"!==a)b.cookie("lastSearch",null),Search.start(a)});b.fn.addRegions=function(a,c,d){if(a&&a.length&&c){d=b.extend({},b.fn.addRegions.defaults,d);var e=[],f,h,m,s,n,l=c.split("::");for(c=0;c<l.length;c++)f=l[c].split(";"),4<f.length&&(f[0].length&&null!==(h=parseFloat(f[1]))&&null!==(m=parseFloat(f[2]))&&null!==(s=parseFloat(f[3]))&&null!==(n=parseFloat(f[4])))&&
e.push([f[0],100*h+"%",100*m+"%",100*s+"%",100*n+"%"]);return!e.length?this:this.each(function(){var c=b(this),g,h;g=parseInt(c.css("padding-top"),10);"a"===this.nodeName&&c.attr("href",NOLINK);for(var f=b("<div>",{"class":d.id}).hide(),m=b("<div>",{"class":d.id+"-cont"}).css({left:g,top:g,right:g,bottom:g}),l=function(a){a.preventDefault();Search.start(a.target);return!1},n=function(a){m.children("a").eq(b(a.target).index()).addClass(d.active)},r=function(a){m.children("a").eq(b(a.target).index()).removeClass(d.active)},
k=0;k<e.length;k++)if(g=b('<a href="'+NOLINK+'">'+e[k][0]+"</a>").appendTo(f),h=b("<a>").css({left:e[k][1],top:e[k][2],width:e[k][3],height:e[k][4]}).append(b("<span>",{text:e[k][0]})).appendTo(m),g.on({mouseover:n,mouseout:r}),typeof Search!==UNDEF)h.on("click",l);c.addTooltip(f,{stay:5E3});c.on("destroy",function(){f.remove()});c.hasClass(d.active)&&m.addClass(d.active);c.on("click",function(){b(this).add(m).toggleClass(d.active)});a.append(m)})}};b.fn.addRegions.defaults={id:"regions",active:"active",
pos:[1,2,1,0]};b.fn.centerThis=function(a){a=b.extend({},b.fn.centerThis.defaults,a);return this.each(function(){var c=b(this),d=c.find(a.selector);if(d.length){var e,f,h,m,s,n,l=a.marginLeft+a.padding;e=a.marginRight+a.padding;var q=a.marginTop+a.padding;s=a.marginBottom+a.padding;n=d.data("ow");h=d.data("oh");if(!n||!h)d.data("ow",n=d.width()),d.data("oh",h=d.height());if(!(f=d.data("bw")))d.data("bw",f=parseInt(d.css("border-top-width"),10)||0);if(!(m=d.data("pw")))d.data("pw",m=parseInt(d.css("padding-top"),
10)||0);e=(c.innerWidth()||b("body").width())-2*(f+m)-l-e;c=(c.innerHeight()||b("body").height())-2*(f+m)-q-s;a.fit&&(n>e||h>c||a.enlarge)?(m=Math.min(e/n,c/h),f=Math.round(n*m),h=Math.round(h*m)):f=n;m=Math.round((e-f)/2)+l;s=Math.round((c-h)/2)+q;f!==n&&d.translateToPos();if(a.animate){d.stop(!0,!1);if(a.preScale&&1!==a.preScale){n=f*a.preScale;var g=h*a.preScale;d.css({left:Math.round((e-n)/2)+l,top:Math.round((c-g)/2)+q,width:Math.round(n),height:Math.round(g)})}else a.init&&d.css({left:m,top:s});
d.animate({left:m,top:s,width:f,height:h},{duration:a.speed,easing:a.effect,complete:a.complete})}else d.css({left:m,top:s,width:f,height:h}),b.isFunction(a.complete)&&a.complete.call(this)}})};b.fn.centerThis.defaults={selector:".main",speed:500,fit:!0,enlarge:!0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,padding:0,init:!1,animate:!1,effect:"swing",complete:null};b.fn.collectMarkers=function(a){a=b.extend({},b.fn.collectMarkers.defaults,a);var c=[],d,e,f;this.each(function(h){d=b(this).find(a.selector);
if(d.length&&(e=d.data(a.mapid))&&(e=b.getLatLng(e)))f=d.data(a.captionid)||d.attr("alt"),c.push({map:e,label:h+1+(f?": "+f.stripHTML():""),link:a.dynamic?b(this):b(this).attr("href")})});return c};b.fn.collectMarkers.defaults={selector:"img:first",mapid:"map",captionid:"caption"};b.fn.markFoldersNew=function(a){a=b.extend({},b.fn.markFoldersNew.defaults,a);text=getTranslations(b.fn.markFoldersNew.text);if(a.days){var c=a.ref||Math.round((new Date).getTime()/864E5);return this.each(function(){c-parseInt(b(this).data("modified")||
0,10)<=a.days&&b(this).after('<span class="'+a.cls+'">'+text.newItem+"</span>")})}};b.fn.markFoldersNew.defaults={days:7,cls:"newlabel"};b.fn.markFoldersNew.text={newItem:"NEW"};b.fn.turtleHelp=function(a){a=b.extend({},b.fn.turtleHelp.defaults,a);var c=getTranslations(b.fn.turtleHelp.text),d=b("<div>",{"class":"help"}),e=function(a){if(c.hasOwnProperty(a)){var e=1,f,n=b("<ul>",{"class":a}).appendTo(d);for(f in c[a])n.append(b("<li><span>"+e++ +"</span>"+c[a][f]+"</li>"))}};a.index&&e("index");a.slide&&
e("slide");a.pressF1&&d.append(b("<p>",{html:c.help_pressF1}));var f=function(){b("body").addModal(d,{uid:"help",title:c.help_title,width:720,savePosition:!0,resizable:!0})};if(a.useF1&&!document.touchMode)b(document).on("keydown",function(c){return document.activeElement&&"INPUT"===document.activeElement.nodeName||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard()||b("#help").is(":visible")?!0:112===(c?c.keyCode:window.event.keyCode)?(c.preventDefault(),f(),!1):!0});return this.each(function(){b(this).on("click",
function(a){a.preventDefault();f();return!1})})};b.fn.turtleHelp.defaults={useF1:!0,index:!0,slide:!1};b.fn.turtleHelp.text={help_title:"Using Turtle gallery",help_pressF1:"Press <b>F1</b> any time to get help!",index:{help_topNavigation:"Top <b>navigation</b> bar with <b>Home</b> button",help_upOneLevel:"<b>Up</b> one level",help_authorInfo:"Author or company <b>information</b>",help_shareAndLike:"<b>Share</b> and <b>Like</b> buttons for social networking",help_searchNew:"Search <b>new images</b>",
help_search:"<b>Search</b> button",help_downloadZip:"<b>Download</b> album or current folder as ZIP file",help_startSlideshow:"Start <b>slideshow</b> <em>Numpad *</em>"},slide:{help_previousPicture:"<b>Previous</b> picture <em>Left arrow</em><em>Swipe right</em>",help_backToIndex:"Back to <b>thumbnail page</b> / up one level <em>Esc</em>",help_toggleFit:"Toggle <b>fit to screen</b> or <b>1:1</b> size <em>Numpad +</em>",help_toggleInfo:"Show/hide <b>captions</b> and other panels, like Metadata, Map, Shopping, etc. <em>Numpad -</em>",
help_toggleThumbnails:"Show/hide <b>thumbnail</b> scroller <em>Numpad -</em>",help_toggleAutoPlay:"Start/stop <b>slideshow</b> <em>Numpad *</em>",help_nextPicture:"<b>Next</b> picture <em>Right arrow</em><em>Swipe left</em>",help_toggleMeta:"Toggle <b>photo data</b>",help_toggleMap:"Toggle <b>map</b>",help_toggleShop:"Toggle <b>shopping options</b> panel",help_downloadImage:"Download <b>high resolution</b> file",help_shareAndLike:"<b>Share</b> and <b>Like</b> buttons for social networking",help_toggleComments:"Toggle <b>Facebook comments</b>",
help_toggleFaces:"Toggle visibility of <b>tagged people</b>"}};b.fn.turtle=function(a,c){a=b.extend({},b.fn.turtle.defaults,a);c=b.fn.turtle.ids;for(var d=getTranslations(b.fn.turtle.text),e=function(c,d,e){b.cookie(c,d,e);a[c]=d},f="thumbsOn infoOn commentsOn metaOn mapOn regionsOn shopOn shareOn printOn fitImage slideshowDelay slideshowOn".split(" "),h,m=0;m<f.length;m++)if(null!==(h=b.cookie(f[m])))a[f[m]]=h;document.touchMode&&(a.preScale=!1);b.fn.addScroll.defaults.dontDrag="#"+c.map;b.fn.addMap.defaults.zoom=
a.mapZoom;b.fn.addMap.defaults.type=a.mapType;b.fn.addMap.defaults.resPath=a.resPath;b.fn.addShop.defaults.id=a.shopId;b.fn.addShop.defaults.path=(a.albumName?a.albumName+"/":"")+a.relPath;b.fn.addShop.defaults.currency=a.shopCurrency||"EUR";b.fn.addShop.defaults.handling=a.shopHandling||null;b.fn.addShop.defaults.locale=a.shopLocale||"US";b.fn.addShop.defaults.quantityCap=a.shopQuantityCap||0;b.fn.addShop.defaults.discount=a.shopDiscount||0;b.fn.addShop.defaults.options=a.shopOptions||"";b.fn.addShop.defaults.coupons=
a.shopCoupons||"";a.shopContinueUrl&&(b.fn.addShop.defaults.continueUrl=a.shopContinueUrl.match(/^https?:/i)?a.shopContinueUrl:window.location.origin+a.shopContinueUrl);b.fn.addPlayer.defaults.backgroundColor=b("body").css("background-color").rgb2hex();a.linkSlides||(b.fn.addPlayer.defaults.fullScreen=a.videoMaximize,b.fn.addPlayer.defaults.auto=a.videoAuto,b.fn.addPlayer.defaults.solution=a.prioritizeFlash?"flash,html":"html,flash");b.fn.centerThis.defaults.fit=a.fitImage;b.fn.centerThis.defaults.animate=
a.transitions;b.fn.centerThis.defaults.padding=a.fitPadding;b.fn.centerThis.defaults.enlarge=!a.fitShrinkonly;b.fn.centerThis.defaults.selector="."+c.main;var s=a.shares,n;for(n in s)s.hasOwnProperty(n)&&(b.fn.addSocial.defaults[n]=s[n]);a.shareSlides=a.shares&&(a.linkSlides&&a.shares.facebookLike||a.shares.facebook||a.shares.twitter||a.shares.gplus||a.shares.pinterest||a.shares.digg||a.shares.delicious||a.shares.myspace||a.shares.stumbleupon||a.shares.reddit||a.shares.email);var l=Math.round((new Date).getTime()/
864E5),q="ms"===VEND&&Modernizr&&!1===Modernizr.opacity,g,x,j,y,w,p,r,k={},v,u,t=null,D=null,z=0,B=null,E=null,C="index"===b("body").attr("id"),G="page"===b("body").attr("id"),A=C&&!a.linkSlides,F=[],L=!1,I=!1,J=null,T=null,xa=b(window).width(),ya=b(window).height(),za=function(){clearTimeout(T);T=setTimeout(function(){if(!b(".jp-video-full").length){var c=b(window).width(),d=b(window).height();if(c!==xa||d!==ya)t&&t.centerThis({fit:a.fitImage,marginTop:O(),marginBottom:P()}),xa=c,ya=d}},100)},Aa=
-1,oa=-1,ab=function(){if(!a.licensee&&(typeof _jaShowAds===UNDEF||_jaShowAds)&&!LOCAL&&!b.cookie("ls")){var c=a.resPath+"/logo.png";b(new Image).load(function(){var a=b("<div>").css({background:"url("+c+") 10px top no-repeat",textAlign:"left",minHeight:"60px",paddingLeft:"90px"}).html("<h4>Turtle skin <small>"+VER+"</small></h4><p>Unlicensed</p>");b("body").addModal(a,{width:240,defaultButton:!1,autoFade:600});b.cookie("ls",!0)}).attr("src",c)}},bb=function(c){if(j&&j.is(":visible")||document.activeElement&&
("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName)||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return!0;switch(c?c.keyCode:window.event.keyCode){case 13:case 10:A?H():window.location.href=g.eq(z).attr("href");break;case 37:z=(z?z:g.length)-1;N();break;case 38:z&&a.cols&&(z=Math.max(0,z-a.cols));N();break;case 39:z=(z+1)%g.length;N();break;case 40:z<g.length-1&&a.cols&&(z=Math.min(g.length-1,z+a.cols));N();break;case 97:case 35:z=g.length-1;N();break;
case 103:case 36:z=0;N();break;case 106:case 179:A&&a.slideshowFullScreen&&(I=!1,b("html").fullScreen(!0));A&&H();U();break;default:return!0}return!1},Fa=function(d){if(j.is(":hidden")||document.activeElement&&("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName)||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return!0;switch(d?d.keyCode:window.event.keyCode){case 27:aa();break;case 37:d=b("."+c.main);var e=b("."+c.img);d.length&&(d.position().left>=a.fitPadding?
la():(e=Math.round(0.8*e.width()),d.animate({left:Math.min(d.position().left+e,a.fitPadding)},a.scrollDuration)));break;case 38:d=b("."+c.main);e=b("."+c.img);d.length&&!(d.position().top>a.fitPadding)&&(e=Math.round(0.8*e.width()),d.animate({top:Math.min(d.position().top+e,a.fitPadding)},a.scrollDuration));break;case 39:d=b("."+c.main);e=b("."+c.img);if(d.length)if(d.position().left+d.outerWidth()<=e.width()-a.fitPadding)Q();else{var f=Math.round(0.8*e.width());d.animate({left:Math.max(d.position().left-
f,e.width()-a.fitPadding-d.outerWidth())},a.scrollDuration)}break;case 40:d=b("."+c.main);e=b("."+c.img);d.length&&!(d.position().top+d.outerHeight()<=e.height()-a.fitPadding)&&(f=Math.round(0.8*e.width()),d.animate({top:Math.max(d.position().top-f,e.height()-a.fitPadding-d.outerHeight())},a.scrollDuration));break;case 97:case 35:A?H(g.length-1):window.location.href=a.firstPage;break;case 103:case 36:A?H(0):window.location.href=a.firstPage;break;case 106:case 179:B?M():(A&&a.slideshowFullScreen&&
(I=!1,b("html").fullScreen(!0)),U());break;case 107:pa();break;case 109:d=a.fitFreespace;a.fitFreespace=!1;a.infoOn||a.thumbsOn?(Ba(),Ca(),t&&d&&t.centerThis({fit:a.fitImage,marginTop:0,marginBottom:0})):(Da(),Ea(),t&&d&&t.centerThis({fit:a.fitImage,marginTop:v.outerHeight()||0,marginBottom:r.outerHeight()||0}));a.fitFreespace=d;break;default:return!0}return!1},ma=function(){(0<a.level?window:parent).location.href=C?a.uplink||"../":"../"+(a.indexPage||"../")},aa=function(){A||(a.curr&&b.cookie("curr:"+
a.albumName+"/"+a.relPath,a.curr,a.keepPrefs),window.location.href=a.indexPage);if(!a.skipIndex||a.level||a.uplink){var d=b("[role=main]"),e;b.fn.hideAllTooltips();j.is(":visible")?(M(),A&&a.slideshowFullScreen&&b("html").fullScreen(!1),a.skipIndex?ma():(d.length&&d.is(":hidden")&&(d.children().addBack().css({visibility:"visible",display:"block"}),x.children("."+c.cont).trigger("adjust"),setTimeout(function(){x.loadImages()},100)),a.transitions?j.fadeOut(a.speed):j.hide(),t&&(e=t.find("."+c.video+
",."+c.audio)).length&&e.trigger("pause"),b("#"+c.map+">."+c.cont).trigger("adjust"),"no"!==a.hash&&b.history.load(""))):d.length&&d.is(":hidden")&&(d.children().addBack().css({visibility:"visible",display:"block"}),setTimeout(function(){x.loadImages()},100));d.find("[role=scroll]").data("dragOn",!1)}},Ga=function(){var a=g.eq(z).children("img:first");return a.length?(a.data(c.link)||a.data(c.src)).getFile():null},qa=function(a){g.children("."+c.checkbox).toggleClass(c.active,a);j&&j.find("."+c.checkbox).toggleClass(c.active,
a)},N=function(d){var e=g.eq(z);g.filter("."+c.active).removeClass(c.active);e.addClass(c.active);!a.skipIndex&&(typeof d===UNDEF||!1===d)&&e.trigger("setactive");u&&(u.filter("."+c.active).removeClass(c.active),u.eq(z).addClass(c.active).trigger("setactive"));a.mapOnIndex&&b("#"+c.map+" ."+c.cont).trigger("setactive",e.find("img:first").data(c.mapid));z&&b.cookie("curr:"+a.albumName+"/"+a.relPath,z,a.keepPrefs)},Ha=function(){b.cookie("curr:"+a.albumName+"/"+a.relPath,null)},la=function(){M();if(A)z?
H(z-1):"startover"===a.afterLast?H(g.length-1):t.find("."+c.main).trigger("dragcancel");else{var d=b("."+c.controls+" ."+c.prev);d.length&&(d=d.attr("href"))!==NOLINK?window.location.href=d:t.find("."+c.main).trigger("dragcancel")}},Q=function(f){var j=[];if(A)if(z<g.length-1)f?ra():M(),H(z+1);else if("startover"===a.afterLast||B&&a.slideshowLoop)f?ra():M(),H(0);else{Ha();t.find("."+c.main).trigger("dragcancel");switch(a.afterLast){case "onelevelup":a.uplink&&ma();break;case "backtoindex":a.skipIndex||
aa();break;case "nextfolder":a.nextFoldersFirst&&(window.location.href=a.nextFoldersFirst);break;case "ask":M(),1<g.length&&j.push({t:d.startOver,h:function(){H(0)}}),a.uplink&&j.push({t:0<a.level?d.upOneLevel:a.homepageLinkText||d.backToHome,h:function(){ma()}}),a.skipIndex||j.push({t:d.backToIndex,h:function(){aa()}}),a.nextFoldersFirst&&j.push({t:d.nextFolder,h:function(){window.location.href=a.nextFoldersFirst}}),b("body").addModal(b("<p>",{text:d.atLastPageQuestion}),j,{type:"question",uid:"dialog",
title:d.atLastPage,width:500})}t.find("."+c.main).trigger("dragcancel")}else{var h=b("."+c.controls+" ."+c.next);h.length&&(h=h.attr("href"))&&h.length&&h!==NOLINK?(e("slideshowDelay",a.slideshowDelay),B&&e("slideshowOn",f,8),window.location.href=h):"ask"===a.afterLast&&(M(),t.find("."+c.main).trigger("dragcancel"),Ha(),a.firstPage&&j.push({t:d.startOver,h:function(){B&&e("slideshowOn",null!=B,8);window.location.href=a.firstPage}}),a.uplink&&j.push({t:0<a.level?d.upOneLevel:a.homepageLinkText||d.backToHome,
h:function(){ma()}}),a.indexPage&&j.push({t:d.backToIndex,h:function(){window.location.href=a.indexPage}}),a.nextFoldersFirst&&j.push({t:d.nextFolder,h:function(){window.location.href=a.nextFoldersFirst}}),b("body").addModal(b("<p>",{text:d.atLastPageQuestion}),j,{uid:"dialog",type:"question",title:d.atLastPage,width:500}))}},Ia=function(){E&&(E=clearTimeout(B),B=setTimeout(function(){Q(!0)},300))},ra=function(){B&&(clearTimeout(B),B=setTimeout(function(){Q(!0)},a.slideshowDelay))},U=function(){B=
clearTimeout(B);var d;k.play.hide();k.pause.showin();(d=t.find("."+c.video+",."+c.audio)).length&&(d.data("playing")||a.videoAuto)?(E=!0,d.trigger("setEndedFn",Ia)):B=setTimeout(function(){Q(!0)},a.slideshowDelay);a.bgAudioId&&b(a.bgAudioId).trigger("play");K()},M=function(){E=!1;if(B){var d;k.pause.hide();k.play.showin();B=clearTimeout(B);K();A?a.bgAudioId&&b(a.bgAudioId).trigger("pause"):e("slideshowOn",!1);(d=t.find("."+c.video+",."+c.audio)).length&&(d.data("playing")||a.videoAuto)&&d.trigger("setEndedFn",
null)}},ca=!1,sa=function(){!I&&!ca&&(ca=!0,p.stop(!0,!1).fadeTo(200,0.8,function(){q&&p.css("filter",null)}),J=setTimeout(function(){K()},1500))},K=function(){I?J=setTimeout(function(){K()},750):(ca=!1,J=clearTimeout(J),p.fadeTo(500,a.controlOutOpacity))},cb=function(d){if(d.target&&("A"===d.target.nodeName||b(d.target).parents("."+c.bottom).length))return!0;ca?(ca=!1,J=clearTimeout(J),p.fadeTo(500,a.controlOutOpacity)):sa();return!0},Ca=function(){a.infoOn&&(k.hideInfo.hide(),k.showInfo.showin(),
a.transitions?r.animate({bottom:-r.outerHeight()},500,function(){r.hide()}):r.css({bottom:-r.outerHeight()}).hide(),t&&a.fitFreespace&&t.centerThis({fit:a.fitImage,marginTop:O(),marginBottom:0}),K(),e("infoOn",!1))},Ea=function(){if(!a.infoOn){k.showInfo.hide();k.hideInfo.showin();r.is(":hidden")&&r.show().css({bottom:-r.outerHeight()});var b=function(){r.children("."+c.map).trigger("adjust")};a.transitions?r.animate({bottom:0},500,b):(r.show().css({bottom:0}),b());t&&a.fitFreespace&&t.centerThis({fit:a.fitImage,
marginTop:O(),marginBottom:r.outerHeight()});K();e("infoOn",!0)}},Ba=function(){a.thumbsOn&&(k.hideThumbs.hide(),k.showThumbs.showin(),a.transitions?w.animate({top:-v.outerHeight()-10},500):w.css({top:-v.outerHeight()-10}),t&&a.fitFreespace&&t.centerThis({fit:a.fitImage,marginTop:0,marginBottom:P()}),K(),e("thumbsOn",!1))},Da=function(){a.thumbsOn||(k.showThumbs.hide(),k.hideThumbs.showin(),a.transitions?w.animate({top:0},500):w.css({top:0}),t&&a.fitFreespace&&t.centerThis({fit:a.fitImage,marginTop:v.outerHeight(),
marginBottom:P()}),K(),e("thumbsOn",!0))},O=function(){return a.fitFreespace&&0<=w.position().top?v.outerHeight()||0:0},P=function(){return a.fitFreespace&&r.is(":visible")?r.outerHeight()||0:0},pa=function(){a.fitImage?Ja():Ka()},Ja=function(){a.hideFitBtn||(k.noresize.hide(),k.resize.showin());b.fn.centerThis.defaults.enlarge=!a.fitShrinkonly;t.centerThis({fit:!1,marginTop:O(),marginBottom:P()});K();e("fitImage",!1)},Ka=function(){a.hideFitBtn||(k.resize.hide(),k.noresize.showin());b.fn.centerThis.defaults.enlarge=
!0;t.centerThis({fit:!0,marginTop:O(),marginBottom:P()});K();e("fitImage",!0)},db=function(a){a.preventDefault();if(!0===b(this).parents("[role=scroll]").data("dragOn"))return!1;H(b(this));return!1},na=function(a){a&&a.length&&(a.stop(),a.trigger("destroy"),a.find("."+c.video+",."+c.audio).trigger("destroy"),a.find("."+c.share+"-"+c.icon).trigger("destroy"),a.find("."+c.map).trigger("destroy"),a.remove())},eb=function(d){var e,f;if(f=d)if(f=d.length){if("number"===a.hash)d=(parseInt(d,10)||1)-1;else a:{var j;
for(f=0;f<g.length;f++)if(j=g.eq(f).children("img:first"),(j=j.length&&(j.data(c.link)||j.data(c.src)).getFile())&&j===d){d=f;break a}d=-1}f=0<=(e=d)&&e<g.length}f?(H(e,!1),a.slideshowAuto=!1):(aa(),"ms"==VEND&&setTimeout(function(){b("[role=main]").show();b("[role=scroll]").trigger("adjust")},10))},La=function(c){"number"===a.hash?b.history.load(c+1):(c=Ga())&&b.history.load(c)},H=function(e,f){typeof f===UNDEF&&(f=!0);if("number"!==typeof e){var h;if(e){h=e;var k;if(null==h)k=z;else if("number"===
typeof h)k=Math.minMax(0,h,g.length);else if(0>(k=g.index(h))&&u)k=u.index(h);h=k}else h=z;e=h}j.is(":hidden")&&(t&&t.data("curr")!==e&&na(t),a.transitions?j.fadeIn(a.speed):j.show(),b.fn.hideAllTooltips(),v.children(":first").loadImages());if(t&&t.data("curr")===e)!1!==f&&La(e);else{h=g.eq(e);var m=h.attr("href"),l=h.children("img").eq(0),n,p;if(l.length){t&&(na(D),D=t,D.css({zIndex:0}),D.find("."+c.main).trigger("unswipe"),document.touchMode||D.unmousewheel());(n=j.children("."+c.img).not(t)).length&&
n.stop().remove();t=b("<div>",{id:"img"+e,"class":c.img}).css({zIndex:1,display:"none"}).data({curr:e}).appendTo(j);if(a.clickBesideForIndex&&!a.skipIndex&&(a.level||a.uplink))t.on("click",function(a){if(b(a.target).hasClass("img"))return a.preventDefault(),aa(),!1});y.css({opacity:0,display:"block"}).animate({opacity:1});z=e;N();A&&f&&La(z);var q=b("<div>",{"class":c.main});if(l.data(c.isother)||!m)k=Math.max(l.data(c.width)||j.width()-160,280),p=Math.max(l.data(c.height)||j.height()-120,200),q.addClass(c.other),
(m=l.data(c.content))&&(m=m.trim()).length?q.css({width:k,height:p}).append(m.match(/^https?:\/\//i)?b("<iframe>",{width:"100%",height:"100%",src:m,frameborder:0,allowfullscreen:"allowfullscreen"}):m):(q.append(b("<a>",{href:l.data(c.link),target:"_blank"})),q.append(b("<p>",{text:d.clickToOpen})),q.children("a:first").append(l.clone())),ba(q);else if(l.data(c.isvideo)||l.data(c.isaudio)){k=l.data(c.width)||j.width()-160;p=l.data(c.height)||j.height()-120;(E=B)&&(B=clearTimeout(B));if(l.data(c.isvideo)){var m=
j.width()-40,r=j.height()-40;if(k>m||p>r)m=Math.min(m/k,r/p),k=Math.round(k*m),p=Math.round(p*m);q.addClass(c.video)}else k=Math.max(320,l.data(c.width)||0),p=Math.max(180,l.data(c.height)||0),q.addClass(c.audio);q.css({width:k,height:p}).data({ow:k,oh:p});setTimeout(function(){n=q.addPlayer({src:l.data(c.link),title:a.showVideoTitle?l.attr("alt"):"",poster:l.data(c.poster),ended:Ia,resPath:a.resPath})},a.speed/3);ba(q)}else k=l.data(c.width),p=l.data(c.height),r=b(new Image),q.addClass(c.image).append(r).css({width:k,
height:p}).data({ow:k,oh:p}),r.attr({src:m,width:k||"auto",height:p||"auto"}),r[0].complete?(l.data("cached",!0),ba(q)):r.on("load",function(){l.data("cached",!0);ba(q)}).prop({src:m});if((n=h.find(".checkbox")).length)q.append(n=n.clone()),n.on("click",function(a){a.preventDefault();a=b(this).hasClass(c.active);b(this).toggleClass(c.active,!a);g.filter("."+c.active).find("."+c.checkbox).toggleClass(c.active,!a);return!1});Ma(l,e)}}},Na=function(a){a&&a.length&&(a.data(c.kill,!0),setTimeout(function(){a&&
a.removeData(c.kill)},500))},fb=function(a){a=b(a.target).parents("."+c.img);a.data(c.kill)||(Na(a),Q());return!1},gb=function(a,d){a.preventDefault();var e=b(a.target).parents("."+c.img);e.data(c.kill)||(Na(e),0<d?la():Q());return!1},Oa=function(a){var d=a.attr("href"),e=a.children("img").eq(0);d&&(e&&!e.data("cached")&&!e.data(c.isvideo)&&!e.data(c.isother))&&b("<img>").on("load",function(){e.data("cached",!0)}).attr({src:d})},ba=function(d){y&&y.length&&(a.transitions?y.stop(!0,!1).animate({opacity:0},
{duration:100,complete:function(){b(this).hide()}}):y.hide());if(A)a.transitions?D&&D.stop(!0,!1).animate({opacity:0},a.speed/2,"linear",function(){na(D)}):na(D),t.children().not("."+c.bottom).remove(),t.append(d);else if(d=t.find("."+c.main),!d.length)return;var e=d.hasClass(c.image),f=d;if(a.rightClickProtect)f.on("contextmenu",noAction);setTimeout(function(){if(!document.touchMode&&a.enableMouseWheel)t.on("mousewheel",gb);if(document.touchMode)B||sa(),t[0].addEventListener(TOUCH_START,cb),f.on({click:noAction,
dbltap:pa});else if(1<g.length||!A)if(f.hasClass(c.image)&&a.clickForNext)f.on("click",fb);else f.on({click:noAction,dblclick:pa});f.hasClass(c.image)&&f.addSwipe(Q,la)},a.speed/2);setTimeout(function(){a.transitions?t.css({opacity:0,display:"block"}).animate({opacity:1},{duration:a.speed,complete:q?function(){t.css({filter:""})}:null}).centerThis({init:!0,speed:Math.round(0.75*a.speed),marginTop:O(),marginBottom:P(),preScale:e&&a.preScale,animate:e&&a.preScale&&1!==a.preScale,fit:a.fitImage}):t.show().centerThis({init:!0,
marginTop:O(),marginBottom:P(),fit:a.fitImage});var b=z,d=t.find("nav a."+c.regions+"-icon").eq(0);d.length&&(b=g.eq(b).find("img:first"),d.addRegions(t.find("."+c.main).eq(0),b.data(c.regions)))},50);A?(z<g.length-1&&Oa(g.eq(z+1)),0<z&&Oa(g.eq(z-1))):a.slideshowOn&&U()},Ma=function(f,h){var j,k,l,m,n=Math.round(0.8*t.width())-30,p=!(f.data(c.isvideo)||f.data(c.isaudio)||f.data(c.isother));A?(r=b("<div>",{"class":c.bottom}).appendTo(t),j=b("<div>",{"class":c.cont}).appendTo(r),typeof h!==UNDEF&&a.showImageNumbers&&
j.append('<h4 class="nr"><strong>'+(h+1)+"</strong> / "+g.length+"</h4>"),(l=f.data(c.caption))&&j.append(l)):j=r.children("."+c.cont);k=b("<nav>",{"class":"buttons"}).prependTo(j);j.width()>n&&j.width(n);var q=function(d){d.preventDefault();var f=b(d.target);d=f.data("rel");var g=j.children("."+d),h=g.is(":visible"),k=P(),l=g.outerHeight(!0);f.toggleClass(c.active,!h);d===c.map?(f=function(){h||g.children("."+c.mapcont).trigger("adjust")},a.transitions?g.slideToggle("fast",f):(g.toggle(),setTimeout(f,
50))):a.transitions?g.slideToggle("fast"):g.toggle();t&&a.fitFreespace&&t.centerThis({fit:a.fitImage,marginTop:O(),marginBottom:k+(h?-l:l)});e(d+"On",!h);return!1},n=function(a,d){var e=b("<div>",{"class":c.panel+" "+a}).data("rel",a);if(d)var f=j.find("."+c.panel).eq(0),e=f.length?e.insertBefore(f):e.appendTo(j);else e=e.appendTo(j);e.append(b("<div>",{"class":c.icon}));return e},s=function(e){var f=b("<a>",{"class":e+"-"+c.icon}).data("rel",e).appendTo(k);a.buttonLabels&&f.text(d[e+"Btn"]||e);document.touchMode||
f.addTooltip(d[e+"Label"]||(a.buttonLabels?"":d[e+"Btn"]||e));f.on("click",q);return f};if(a.shareSlides){var v;a.shareInline?(v=n(c.share,!0),s(c.share),v=b("<div>",{"class":c.shares}).css("min-height","25px").appendTo(v)):(v=b("<a>",{"class":c.share+"-"+c.icon}).appendTo(k),a.buttonLabels&&v.text(d.shareBtn));A?(m="number"===a.hash?z+1:Ga(),setTimeout(function(){v.addSocial({hash:m,inline:a.shareInline,buttonLabels:a.shareLabels,title:(f.data(c.caption)||"").stripHTML(),image:f.data(c.src)})},a.speed/
2)):v.addSocial({useHash:!1,inline:a.shareInline,buttonLabels:a.shareLabels,title:(f.data(c.caption)||"").stripHTML(),image:f.data(c.src)})}var w;if(!A&&(w=j.children("."+c.comments)).length)w.data("rel",c.comments),s(c.comments);for(var x=[c.meta,c.map,c.shop,c.print],y=0;y<x.length;y++)if(w=x[y],null!=f.data(w)&&(w!=c.map||a.mapOnSlide))n(w),s(w);if(p){if(a.fotomotoOn){var B=b("<a>",{"class":c.fotomoto+"-"+c.icon,text:a.buttonLabels?d.fotomotoBtn:""}).appendTo(k);B.addTooltip(LOCAL?d.locationWarning:
"<h5>Fotomoto</h5>"+d.fotomotoLabel);setTimeout(function(){B.on("click",function(b){b.preventDefault();typeof FOTOMOTO!==UNDEF&&!LOCAL&&FOTOMOTO.API.showWindow(10,f.data(c.link)||(A?f.data(c.src):f.attr("src")).replace(a.thumbs+"/",a.slides+"/"));return!1})},a.speed)}if(l=f.data(c.mostphotos))l.startsWith("http")||(l="http://www.mostphotos.com/"+l),b("<a>",{href:l,"class":c.mostphotos+"-"+c.icon,text:a.buttonLabels?d.mostphotosBtn:"",target:"_blank"}).appendTo(k).addTooltip("<h5>"+d.mostphotosBtn+
"</h5>"+d.mostphotosLabel);f.data(c.regions)&&(n=b("<a>",{"class":c.regions+"-"+c.icon}).appendTo(k),a.buttonLabels&&n.text(d.people),a[c.regions+"On"]&&n.addClass(c.active),n.on("click",function(){e(c.regions+"On",!b(this).hasClass(c.active))}))}if((l=f.data(c.link))&&(!p&&a.downloadNonImages||p&&!a.rightClickProtect))p=b("<a>",{href:l,"class":c.link+"-"+c.icon,download:"",target:"_blank"}).appendTo(k),a.buttonLabels&&p.text(f.data(c.isoriginal)?d.original:d.hiRes),p.addTooltip((a.buttonLabels?"":
"<strong>"+(f.data(c.isoriginal)?d.original:d.hiRes)+"</strong><br>")+("download"in p[0]?"":"<small>"+d.saveTip+"<br>")+'<input class="fullw" type="text" value="'+l.fullUrl()+'" readonly></small>',{stay:5E3});a.imgHook&&(p=b("<a>",{"class":c.custom+"-"+c.icon}).appendTo(k),a.buttonLabels&&a.imgHookBtn&&p.text(a.imgHookBtn),p.on("click",function(d){d.preventDefault();d=f.data(c.link)||(A?f.data(c.src):f.attr("src")).replace(a.thumbs+"/","");b("body").addModal(b(a.imgHook.replace(/\%fileName\%/g,d)),
{uid:c.custom,width:a.imgHookWidth||600,title:a.imgHookBtn,defaultButton:"okButton",resizable:!0,savePosition:!0});return!1}));a.imgHookFn&&b.isFunction(a.imgHookFn)&&a.imgHookFn.call(f);j.children("."+c.panel).each(function(){var d=b(this),e=d.data("rel");if(e&&null!==(l=f.data(e))){if(e===c.map){var g=b("<div>",{"class":c.mapcont}).appendTo(d);g.width(j.width()-30);if(a.mapAll)g.addMap({click:function(){A?H(this.link):window.location.href=this.link},markers:F,curr:parseInt(A?f.data(c.mapid):u.filter("."+
c.active).find("img:first").data(c.mapid),10)});else{var h=(f.data(c.caption)||"").stripHTML()||f.attr("alt")||z+1+"";g.addMap({map:l,label:h})}setTimeout(function(){g.trigger("adjust")},a.speed)}else if(e===c.shop){h={};"+"!==l&&(h.options=l);if(null!==(l=f.data(c.discount)))h.discount=l;d.addShop(f.closest("a"),h)}else d.append(l);a[e+"On"]?k.children("a."+e+"-icon").addClass(c.active):d.hide()}});k.html().length||k.remove();a.infoOn||r.hide()},hb=function(){var e=b("<div>",{"class":c.feedback}),
f=window.location.href.getDir(),h=b("<form>",{id:c.feedback}).appendTo(e);a.directKey&&(h.append('<input type="hidden" name="from" value="'+a.feedbackEmail.replace("|","@")+'">'),h.append('<input type="hidden" name="to" value="'+xDecrypt(a.directKey)+'">'),h.append(b('<p class="email"><label for="email">'+d.yourEmail+'</label><input id="email" name="email" type="email"></p>')));h.append(b('<p class="subject"><label for="subject">'+d.subject+'</label><input id="subject" name="subject" value="'+a.albumName+
(a.relPath.length?"/"+a.relPath:"")+'"></p>'));h.append(b('<p class="message"><label for="message">'+d.message+'</label><textarea id="message" name="message"></textarea></p>'));g.filter(function(){return b(this).children("."+c.active).length}).each(function(a){var e=b(this).find("img").eq(0),g=e.data("src"),e=(e.data(c.isimage)||e.data(c.isother)?g:e.data("link")||"").getFile();h.append(b('<div><aside><img src="'+g+'"></aside><div><a class="remove">&times;</a><label for="img'+a+'">'+e+'</label><input type="hidden" name="file['+
(a+1)+']" value="'+f+"#"+encodeURIComponent(e)+'"><textarea id="img'+a+'" name="comment['+(a+1)+']" placeholder="'+d.comment+'"></textarea></div></div>'))});h.find("a.remove").on("click",function(a){a.preventDefault();b(this).parents("div").eq(1).remove();return!1});var j=function(c){if(!c||!c.length)return console&&console.log("Submitform Error: Missing form"),!1;var e;c=c.find("form").eq(0);var f=window.location.href.split("#")[0];if(a.directKey){var g=!1;e=c.find("input#email").val();if(!e.length||
!e.match(/^\S+@\S+[\.][0-9a-z]+$/))return b("body").addModal(b("<div>",{html:d.emailMissing}),{type:"error"}),!1;b.ajax({url:"http://jalbum.net/integration/api/sendmail.json",dataType:"jsonp",data:c.serialize(),success:function(a){"Ok"===a.Result?b("body").addModal(b("<div>",{html:d.messageSent}),{autoFade:1500}):(g=!0,DEBUG&&console&&console.log("Error sending mail: Result="+a.Result+" Cause="+a.Cause),b("body").addModal(b("<div>",{html:"<h3>"+d.errorSending+'</h3><p class="err">'+a.Result+", "+
a.Cause+"</p>"}),{type:"error"}))}});if(g)return!1}else{var h="mailto:"+encodeURIComponent(a.feedbackEmail.replace("|","@")),h=h+("?subject="+encodeURIComponent(c.find("input#subject").val())),h=h+"&body=";if(e=c.find("textarea#message").val())h+=encodeURIComponent(e+"\n\n");c.children("div").each(function(a){h+=encodeURIComponent(a+1+". "+f+"#"+encodeURIComponent(b(this).find("label").eq(0).text())+"\n");if(e=b(this).find("textarea").val())h+=encodeURIComponent(e+"\n");h+=encodeURIComponent("\n")});
if(2048<h.length)return b("body").addModal(b("<div>",{html:"<p>"+d.tooLong+"</p>"}),{type:"error"}),!1;window.location.href=h}return!0};h.on("submit",function(){return j(b("#feedback"))});b("body").addModal(e,[{t:d.send,h:j}],{uid:"feedback",enableKeyboard:!1,title:d.sendFeedback,width:480,resizable:!0,savePosition:!0});return!1},ib=function(){var a=!1,e=g.filter(function(){var d=b(this),e;return d.children("."+c.checkbox).hasClass(c.active)?(d=d.children("img:first"),e=d.data(c.shop),a=!0,!(e&&"+"!==
e||d.data(c.discount))):!1});if(0===e.length)b("body").addModal(b("<h3>"+d.noItemsSelected+"</h3><p>"+(a?d.nonShoppableItems:d.selectItemsHint)+"</p>"),{type:"warning"});else{var f=b("<div>",{"class":c.shopAll});window.location.href.getDir();var h=b("<ul>",{"class":c.thumbs}).appendTo(f);e.each(function(){h.append(b("<li>").append(b("<img>",{src:b(this).children("img:first").data("src")})))});b("<div>",{"class":c.shop}).appendTo(f).addShop(e);b("body").addModal(f,{uid:c.shopAll+"w",title:d.buyNItems.replace("{0}",
e.length),width:640,resizable:!0,savePosition:!0,enableKeyboard:!1,closeOnClickOut:!1,defaultButton:"close"})}},Pa=function(){var c=0;p.children().each(function(){"none"!==b(this).css("display")&&(c+=b(this).outerWidth())});p.css({marginLeft:-Math.floor(c/2)}).width(c);document.touchMode||p.children("a").not(k.play).addTooltip({delay:500});var d=b("<div>",{"class":"slideshowdelay",text:k.play.prop("title")}),f=b("<form>").appendTo(d);f.on("submit",function(a){a.preventDefault();U();return!1}).append(b("<input>",
{type:"text",value:a.slideshowDelay/1E3}).focus().on("change",function(){e("slideshowDelay",Math.round(parseFloat(1E3*b(this).val())||b.fn.turtle.defaults.slideshowDelay));return!0})).append(b("<a>",{"class":"button",href:NOLINK,text:" "}).on("click",ta));f.find("input");k.play.prop("title","").addTooltip(d,{stay:5E3});document.touchMode||(A?p.hide():J=setTimeout(function(){K()},1500));p.on({mouseenter:function(){I=!0;b(this).stop(!0,!1).fadeTo(200,1)},mouseleave:function(){I=!1;b(this).stop(!0,!1).fadeTo(200,
0.8)}});if(!document.touchMode)j.on("mousemove",function(a){if(!L&&(Aa-a.clientY||oa-a.clientX))0<=oa&&sa(),oa=a.clientX,Aa=a.clientY})},jb=function(a){a.preventDefault();M();la();return!1},kb=function(a){a.preventDefault();M();aa();return!1},lb=function(){a.curr&&b.cookie("curr:"+a.albumName+"/"+a.relPath,a.curr,600);return!0},Qa=function(a){a.preventDefault();Ja();return!1},Ra=function(a){a.preventDefault();Ka();return!1},Sa=function(a){a.preventDefault();Ca();return!1},Ta=function(a){a.preventDefault();
Ea();return!1},Ua=function(a){a.preventDefault();Ba();return!1},Va=function(a){a.preventDefault();Da();return!1},ta=function(c){c.preventDefault();A&&a.slideshowFullScreen&&(I=!1,b("html").fullScreen(!0));U();return!1},Wa=function(a){a.preventDefault();M();return!1},Xa=function(a){a.preventDefault();ra();Q();return!1};if(C){setTimeout(ab,1E3);g=b(this).find("td > a");var da=b(a.header);if(da&&da.length){if(C&&(g.length&&a.showStart)&&da){var ea=b("<div>",{"class":c.startShow}).appendTo(da),ua=b("<div>",
{"class":c.startTxt,width:"auto",text:d.startSlideshow}).appendTo("body"),Ya=ea.width(),Za=ua.outerWidth();ea.append(ua);if(Ya<Za)ua.on({mouseenter:function(){ea.stop(!0,!1).animate({width:Za},500)},mouseleave:function(){ea.stop(!0,!1).animate({width:Ya},500)}});ea.on({click:function(d){if(A)return d.preventDefault(),a.slideshowFullScreen&&b("html").fullScreen(!0),z===g.length-1?H(0):H(),g.length&&setTimeout(U,1E3),!1;e("slideshowOn",!0,8);window.location.href=g.filter("."+c.active).attr("href")}})}a.uplink=
da.find("."+c.parent+">a").attr("href")||""}x=b("."+c.items);if(g.length){var fa,ga,mb=function(){var c=g.index(b(this));c&&b.cookie("curr:"+a.albumName+"/"+a.relPath,c,a.keepPrefs)};g.each(function(){fa=b(this);ga=fa.find("img").eq(0);if(ga.length){if(a.rightClickProtect)fa.on("contextmenu",noAction);ga.attr("src").endsWith("/"+a.loadImg)&&ga.addClass(c.toload);a.markNewDays&&l-parseInt(ga.data(c.modified)||0,10)<=a.markNewDays&&fa.append(b("<span>",{"class":c.newItem,text:d.newItem}));document.touchMode||
fa.addTooltip({delay:500});if(!A)g.on("click",mb)}});setTimeout(function(){x.loadImages();setTimeout(function(){x.loadImages()},1200)},100);var $a=function(){x.loadImages();return!0};document.touchMode&&(x[0].addEventListener("scroll",$a),x[0].addEventListener(TOUCH_END,$a));g.children("."+c.checkbox).on("click",function(a){a.preventDefault();a=b(this).hasClass(c.active);b(this).toggleClass(c.active,!a);b(this).parent().hasClass(c.active)&&j.find("."+c.checkbox).toggleClass(c.active,!a);return!1}).on(document.touchMode?
"dbltap":"dblclick",function(a){a.preventDefault();qa(!b(this).hasClass(c.active));return!1});b("#"+c.selectAll).on("click",function(a){a.preventDefault();qa(!0);return!1});b("#"+c.selectNone).on("click",function(a){a.preventDefault();qa(!1);return!1});b("#"+c.shopAll).on("click",ib)}x.find("."+c.folders).on("click",function(){b.cookie("curr:"+a.albumName+"/"+a.relPath,null);return!0});b("#"+c.feedback).on("click",hb);if(g.length){if(a.mapOnIndex||a.mapAll&&a.mapOnSlide)F=g.collectMarkers({dynamic:A});
a.mapOnIndex&&F.length&&b("#"+c.map+" ."+c.cont).addMap({click:function(){A?H(this.link):window.location.href=this.link},markers:F,range:999,curr:0});null===(z=b.cookie("curr:"+a.albumName+"/"+a.relPath))||z>=g.length?(z=0,N(!0)):setTimeout(function(){N()},300);if(b.isFunction(a.enableKeyboard)||a.enableKeyboard)b(window).on("keydown",bb)}if(g.length&&A){g.on("click",db);j=b("<div>",{"class":c.gallery}).attr("role","gallery").appendTo("body");y=b("<div>",{"class":c.wait}).appendTo(j);w=b("<div>",
{"class":c.navigation}).appendTo(j);var ha,V,W,X,ia=0,Y,ja,R,S,va;v=b("<div>",{"class":c.scrollbox}).appendTo(w);X=b("<div>",{"class":"wrap"}).appendTo(v);X=b("<ul>",{"class":c.cont+" "+c.load}).appendTo(X);g.each(function(){ha=b(this);W=ha.find("img").eq(0);if(W.length){V=b("<a>",{href:NOLINK}).appendTo(b("<li>").appendTo(X));Y||(Y=V.width(),ja=V.height()||Y);R=W.attr("width");S=W.attr("height");if(R>Y||S>ja)R/Y>S/ja?(S=Math.round(S*Y/R),R=Y):(R=Math.round(R*ja/S),S=ja);b("<img>",{src:W.attr("src"),
"class":W.attr("class")}).data({src:W.data("src")}).attr({width:R,height:S}).appendTo(V);va=ha.children("."+c.newItem);va.length&&V.append(va.clone());document.touchMode||V.addTooltip(ha.data("hint")||ha.siblings("."+c.caption).html(),{delay:500});ia+=V.outerWidth()}});ia+=2*X.children().length;X.width(ia);X.scrollThumbs({enableMouseWheel:a.enableMouseWheel});u=v.find("li > a");u.on("click",function(){if(!0===b(this).parents("[role=scroll]").data("dragOn"))return!1;b(this).hasClass(c.active)||(M(),
H(u.index(b(this))));N();return!1});p=b("<nav>",{"class":c.controls+" clearfix"}).appendTo(w);k.prev=b("<a>",{"class":c.prev,title:d.previousPicture}).appendTo(p);if(!a.skipIndex||a.level||a.uplink)k.up=b("<a>",{"class":c.up,title:a.skipIndex?d.upOneLevel:d.backToIndex}).appendTo(p);k.noresize=b("<a>",{"class":c.noresize,title:d.oneToOneSize}).appendTo(p);k.resize=b("<a>",{"class":c.resize,title:d.fitToScreen}).appendTo(p);a.hideFitBtn?k.resize.add(k.noresize).hide():(k.resize.togglein(!a.fitImage),
k.noresize.togglein(a.fitImage));k.hideThumbs=b("<a>",{"class":c.hideThumbs,title:d.hideThumbs}).appendTo(p);k.showThumbs=b("<a>",{"class":c.showThumbs,title:d.showThumbs}).appendTo(p);k.showThumbs.togglein(!a.thumbsOn);k.hideThumbs.togglein(a.thumbsOn);k.hideInfo=b("<a>",{"class":c.hideInfo,title:d.hideInfo}).appendTo(p);k.showInfo=b("<a>",{"class":c.showInfo,title:d.showInfo}).appendTo(p);k.showInfo.togglein(!a.infoOn);k.hideInfo.togglein(a.infoOn);k.play=b("<a>",{"class":c.play,title:d.startAutoplay}).appendTo(p);
k.pause=b("<a>",{"class":c.pause,title:d.stopAutoplay}).appendTo(p);1<g.length?(k.play.togglein(!a.slideshowAuto),k.pause.togglein(a.slideshowAuto)):k.play.add(k.pause).hide();k.next=b("<a>",{"class":c.next,title:d.nextPicture}).appendTo(p);k.prev.on("click",jb);if(k.up)k.up.on("click",kb);k.noresize.on("click",Qa);k.resize.on("click",Ra);k.hideInfo.on("click",Sa);k.showInfo.on("click",Ta);k.hideThumbs.on("click",Ua);k.showThumbs.on("click",Va);k.play.on("click",ta);k.pause.on("click",Wa);k.next.on("click",
Xa);Pa();a.thumbsOn||w.css("top",-v.outerHeight()-10);v.on({mouseenter:function(){K();L=!0},mouseleave:function(){L=!1}});"page"!==b("body").attr("id")&&(a.hash&&"no"!==a.hash)&&b.history.init(eb);a.slideshowAuto?(A&&a.slideshowFullScreen&&b("html").fullScreen(!0),H(z),U()):a.skipIndex&&H(z);if(b.isFunction(a.enableKeyboard)||a.enableKeyboard)b(window).on("keydown",Fa)}}else{g=b(this);j=b("."+c.gallery);w=b("."+c.navigation);p=b("."+c.controls);t=b("."+c.img);r=b("."+c.bottom);g=t.children("."+c.main);
z=0;v=b("."+c.scrollbox);u=v.find("li > a");var Z=g.find("img:first");a.mapAll&&(F=u.collectMarkers());var wa=v.find("."+c.cont),ka=0;document.touchMode||u.addTooltip({delay:500}).each(function(){ka+=b(this).outerWidth()});ka+=2*u.length;wa.width(ka);wa.scrollThumbs({enableMouseWheel:a.enableMouseWheel});u.on("click",function(){return!b(this).parents("[role=scroll]").data("dragOn")});wa.trigger("setactive");a.thumbsOn||w.css("top",-v.outerHeight()-10);k.prev=p.children("."+c.prev);k.up=p.children("."+
c.up);k.noresize=p.children("."+c.noresize);k.resize=p.children("."+c.resize);k.hideInfo=p.children("."+c.hideInfo);k.showInfo=p.children("."+c.showInfo);k.hideThumbs=p.children("."+c.hideThumbs);k.showThumbs=p.children("."+c.showThumbs);k.play=p.children("."+c.play);k.pause=p.children("."+c.pause);k.next=p.children("."+c.next);1<v.find("."+c.cont+" a").length?(k.play.togglein(!a.slideshowAuto),k.pause.togglein(a.slideshowAuto)):k.play.add(k.pause).hide();a.hideFitBtn&&k.resize.add(k.noresize).hide();
if(k.up)k.up.on("click",lb);k.noresize.on("click",Qa);k.resize.on("click",Ra);k.hideInfo.on("click",Sa);k.showInfo.on("click",Ta);k.hideThumbs.on("click",Ua);k.showThumbs.on("click",Va);k.play.on("click",ta);k.pause.on("click",Wa);k.next.on("click",Xa);Pa();a.thumbsOn?(k.showThumbs.hide(),k.hideThumbs.showin(),w.css({top:0}).removeClass("hide")):(k.hideThumbs.hide(),k.showThumbs.showin(),w.css({top:-v.outerHeight()-10}).removeClass("hide"));a.infoOn?(k.showInfo.hide(),k.hideInfo.showin(),r.show().css({bottom:0})):
(k.hideInfo.hide(),k.showInfo.showin(),r.css({bottom:-r.outerHeight()}).hide());a.hideFitBtn||(a.fitImage?(k.resize.hide(),k.noresize.showin()):(k.noresize.hide(),k.resize.showin()));Z.length&&(g.hasClass(c.image)&&!Z[0].complete?(Z.on("load",function(){Z.data("cached",!0);ba()}).attr({src:Z.attr("src")}),y=b("<div>",{"class":c.wait}).appendTo(j),y.fadeIn()):(Z.data("cached",!0),ba()),Ma(Z));if(b.isFunction(a.enableKeyboard)||a.enableKeyboard)b(window).on("keydown",Fa)}if(g.length&&A||!G)if(b(window).on("resize",
za),document.touchMode)b(window).on("orientationchange",za);return this};b.fn.turtle.defaults={header:"#main header",slides:"slides",thumbs:"thumbs",linkSlides:!1,loadImg:"blank.png",hash:"fileName",resPath:"res/",relPath:"",level:0,skipIndex:!1,showStart:!0,keepPrefs:600,speed:600,controlbarOpacity:0,controlOutOpacity:0,transitions:!0,preScale:0.95,slideshowDelay:4E3,slideshowLoop:!1,slideshowAuto:!1,slideshowFullScreen:!1,markNewDays:0,afterLast:"ask",thumbsOn:!1,fitImage:!1,fitShrinkonly:!1,fitFreespace:!0,
hideFitBtn:!1,fitPadding:15,borderWidth:10,clickForNext:!0,clickBesideForIndex:!1,rightClickProtect:!1,showImageNumbers:!0,buttonLabels:!1,infoOn:!0,metaOn:!1,mapOn:!1,mapOnIndex:!1,mapOnSlide:!1,mapType:"roadmap",mapZoom:18,mapAll:!1,shopOn:!0,shopGateway:"paypal",shopCurrency:"USD",shareOn:!1,commentOn:!1,printOn:!1,regionsOn:!1,downloadNonImages:!1,enableKeyboard:!0,enableMouseWheel:!0,videoAuto:!1,videoMaximize:!1,videoTitleOn:!1,prioritizeFlash:!1,scrollDuration:1E3};b.fn.turtle.ids={gallery:"gallery",
items:"items",folders:"folders",thumbs:"thumbs",navigation:"navigation",scrollbox:"scrollbox",active:"active",parent:"parent",bottom:"bottom",img:"img",main:"main",image:"image",video:"video",audio:"audio",other:"other",wait:"wait",cont:"cont",panel:"panel",icon:"icon",caption:"caption",meta:"meta",map:"map",mapcont:"mapcont",mapid:"mapid",shop:"shop",shopAll:"shopall",discount:"discount",fotomoto:"fotomoto",mostphotos:"mostphotos",share:"share",shares:"shares",print:"print",comments:"comments",link:"link",
custom:"custom",poster:"poster",isoriginal:"isoriginal",content:"content",width:"width",height:"height",src:"src",ext:"ext",thumbExt:"thumbext",regions:"regions",isimage:"isimage",isvideo:"isvideo",isaudio:"isaudio",isother:"isother",modified:"modified",startShow:"startshow",startBtn:"startbtn",startTxt:"starttxt",controls:"controls",prev:"prev",next:"next",up:"up",noresize:"noresize",resize:"resize",hideInfo:"hideinfo",showInfo:"showinfo",hideThumbs:"hidethumbs",showThumbs:"showthumbs",play:"play",
pause:"pause",newItem:"newlabel",showHint:"showhint",kill:"kill",load:"load",toload:"toload",feedback:"feedback",checkbox:"checkbox",selectAll:"selectall",selectNone:"selectnone"};b.fn.turtle.text={startSlideshow:"Start slideshow",close:"Close",atLastPage:"At last page",atLastPageQuestion:"Where to go next?",startOver:"Start over",backToHome:"Back to home",stop:"Stop",upOneLevel:"Up one level",backToIndex:"Back to index page",previousPicture:"Previous picture",nextPicture:"Next picture",previousFolder:"Previous folder",
nextFolder:"Next folder",changeSpeed:"Change speed",oneToOneSize:"1:1 size",fitToScreen:"Fit to screen",showInfo:"Show caption / info",hideInfo:"Hide caption / info",showThumbs:"Show thumbnails",hideThumbs:"Hide thumbnails",startAutoplay:"Start autoplay",stopAutoplay:"Stop autoplay",newItem:"NEW",clickToOpen:"Click to open this document with the associated viewer",commentsBtn:"Comments",commentsLabel:"Add a comment, view other's comments",metaBtn:"Photo data",metaLabel:"Display photograpic (Exif/Iptc) data",
mapBtn:"Map",mapLabel:"Show the photo location on map",shopBtn:"Buy",shopLabel:"Show options to buy this item",shareBtn:"Share",shareLabel:"Share this photo over social sites",download:"Download",original:"Original",hiRes:"Hi res.",saveTip:"Use Right click -> Save link as... to download",fotomotoBtn:"Buy / Share",fotomotoLabel:"Buy prints or digital files, send free eCard through Fotomoto",mostphotosBtn:"Purchase",mostphotosLabel:"Download this image from <b>mostphotos.com</b>!",people:"People",sendFeedback:"Send feedback",
message:"Message",subject:"Subject",comment:"Comment",yourEmail:"Your email address",send:"Send",messageSent:"Message sent",errorSending:"Error sending email!",tooLong:"Text is too long or too many items!",emailMissing:"Email is misssing or wrong!",noItemsSelected:"No items selected!",selectItemsHint:"Select the desired items first!",nonShoppableItems:"The selected items have no or have proprietary shopping options, or different discount rates.",buyNItems:"Buy {0} items",locationWarning:"Works only when uploaded"}})(jQuery);
